{"version":3,"file":"Reset-a2c10247.js","sources":["../../src/Reset.html"],"sourcesContent":["<script>\n    import firebase from 'firebase/app';\n    import 'firebase/auth';\n    import ModalView from './UI/UIModalView.html'\n    import Loading from './UI/UILoading.html'\n    import { session, api, alert, trigger, login_errors, public_key, fbase, modal, qs } from './CTStore.js';\n    let cfmpassword = \"\", password = \"\", error, loading = false, completed = false;\n\n    function login() {\n            loading = true;\n            import('./Login.html').then(module => {\n                loading = false;\n                $modal = [{ view: module.default }];\n            });\n        }\n    function reset() {\n        loading = true;\n        let oob = qs(\"oobCode\");\n        firebase.auth().confirmPasswordReset(oob,password).then(r => {\n            loading = false;\n            completed = true;\n        }).catch(function (e) {\n            loading = false;\n            password = \"\", cfmpassword = \"\";\n            error = e.message;\n        });\n    }\n    $: if(cfmpassword.length>5){\n        error = undefined;\n        if(password!=cfmpassword) error = \"Password confirmation does not match\"\n    }\n</script>\n<ModalView dismiss=\"false\">\n    <div slot=\"loader\">\n        {#if loading}\n  <Loading>\n    <div slot=\"message\">\n      One Moment Please..\n    </div>\n  </Loading>\n    {/if}\n  </div>\n  <div slot=\"title\" class=\"text-center font-semibold text-2xl text-gray-600 m-2\">\n    Reset Password\n  </div>\n  <div slot=\"content\" class=\"p-5\">\n    {#if completed}\n    <p class=\"text-theme\">Password successfully reset</p>\n    <p>You can now login with your new password</p>\n    <button class=\"bg-theme font-semibold text-white w-full p-3 my-5 rounded\" on:click=\"{login}\">Login Now</button>\n    {:else}\n      <p class=\"text-theme\">Reset Your Password</p>\n      <p>Provide a new password for your account</p>\n    <div class=\"border border-gray-300 rounded-lg p-2 my-2 bg-white flex\">\n        <label class=\"flex-none w-20 self-center text-xs uppercase text-gray-500 font-semibold\">Password</label>\n        <input class=\"flex-grow focus:outline-none\" type=\"password\" placeholder=\"********\" bind:value=\"{password}\" />\n    </div>\n    <div class=\"border border-gray-300 rounded-lg p-2 my-2 bg-white flex\">\n        <label class=\"flex-none w-20 self-center text-xs uppercase text-gray-500 font-semibold\">Confirm Password</label>\n        <input class=\"flex-grow focus:outline-none\" type=\"password\" placeholder=\"********\" bind:value=\"{cfmpassword}\" />\n    </div>\n    {#if error}\n        <div class=\"rounded-lg bg-red-600 text-white p-2\">\n            <i class=\"icon ion-md-warning text-xl\"></i> {error}\n        </div>\n    {/if}\n  <button class=\"bg-theme font-semibold text-white w-full p-3 my-5 rounded disabled:opacity-25\" on:click=\"{reset}\" disabled=\"{password.length<5 || password!=cfmpassword}\">Reset Password</button>\n   {/if}\n  </div>\n</ModalView>"],"names":["ctx","length","error","cfmpassword","password","loading","completed","undefined","then","module","$modal","view","default","oob","qs","firebase","auth","confirmPasswordReset","r","catch","e","message"],"mappings":"olBAkCaA,4GAAAA,oZA2BJA,q+BAKqHA,KAASC,OAAO,GAAKD,MAAUA,mFAXrDA,iDAIAA,2GAOGA,oCAXHA,UAAAA,qBAIAA,UAAAA,MAE/FA,kFAKqHA,KAASC,OAAO,GAAKD,MAAUA,kgBAjBpEA,4IAchCA,4JAAAA,iEAjBhDA,2rBAxCgCE,EAAjCC,EAAc,GAAIC,EAAW,GAAWC,GAAU,EAAOC,GAAY,wCAqBnEH,EAAYF,OAAO,QACrBC,OAAQK,GACLH,GAAUD,OAAaD,EAAQ,oEApB9BG,GAAU,UACH,uBAAgBG,KAAKC,QACxBJ,GAAU,OACVK,IAAYC,KAAMF,EAAOG,6BAIjCP,GAAU,OACNQ,EAAMC,EAAG,WACbC,EAASC,OAAOC,qBAAqBJ,EAAIT,GAAUI,KAAKU,QACpDb,GAAU,OACVC,GAAY,KACba,gBAAgBC,OACff,GAAU,OACVD,EAAW,QAAID,EAAc,QAC7BD,EAAQkB,EAAEC,wBA+BkFjB,gCAIAD"}