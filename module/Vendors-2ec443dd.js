import{S as e,i as t,s as n,e as l,d as o,M as s,j as a,m as c,k as r,o as u,p as i,q as d,X as f,B as p,D as m,E as $,C as g,b as v,c as h,r as x,u as b,h as _,t as y,g as w,F as k,G as C,a as P,P as j,Q as V,l as B,v as N,y as E,w as S,n as T,R as q,T as I,L as O,x as M,V as U}from"./Web-48a8ea76.js";import{T as A}from"./UITextField-2c517053.js";import{T as D}from"./UIToolbar-3cd3b61a.js";import{U as F}from"./UIItem-e752f40d.js";import{P as G}from"./ProductSelectionView-dc2e5926.js";function L(e,t,n){const l=e.slice();return l[25]=t[n],l}function z(e,t,n){const l=e.slice();return l[28]=t[n],l[30]=n,l}function H(e){let t,n;return t=new O({props:{$$slots:{message:[Q]},$$scope:{ctx:e}}}),{c(){a(t.$$.fragment)},m(e,l){c(t,e,l),n=!0},i(e){n||(r(t.$$.fragment,e),n=!0)},o(e){u(t.$$.fragment,e),n=!1},d(e){i(t,e)}}}function Q(e){let t;return{c(){t=l("div"),t.textContent="One Moment Please..",v(t,"slot","message")},m(e,n){h(e,t,n)},d(e){e&&_(t)}}}function R(e){let t,n,o=e[2]&&H(e);return{c(){t=l("div"),o&&o.c(),v(t,"slot","loader")},m(e,l){h(e,t,l),o&&o.m(t,null),n=!0},p(e,n){e[2]?o?4&n[0]&&r(o,1):(o=H(e),o.c(),r(o,1),o.m(t,null)):o&&(x(),u(o,1,1,()=>{o=null}),b())},i(e){n||(r(o),n=!0)},o(e){u(o),n=!1},d(e){e&&_(t),o&&o.d()}}}function W(e){let t,n,s=e[0]._id?"Edit Vendor":"Create Vendor";return{c(){t=l("div"),n=y(s),v(t,"slot","title"),v(t,"class","font-semibold text-xl text-gray-600 pb-3")},m(e,l){h(e,t,l),o(t,n)},p(e,t){1&t[0]&&s!==(s=e[0]._id?"Edit Vendor":"Create Vendor")&&w(n,s)},d(e){e&&_(t)}}}function X(e){let t,n,s,a=e[28].name+"";return{c(){t=l("option"),n=y(a),t.__value=s=""+e[28].id,t.value=t.__value},m(e,l){h(e,t,l),o(t,n)},p(e,l){2&l[0]&&a!==(a=e[28].name+"")&&w(n,a),2&l[0]&&s!==(s=""+e[28].id)&&(t.__value=s,t.value=t.__value)},d(e){e&&_(t)}}}function J(e){let t;return{c(){t=l("p"),t.textContent="No products selected.",v(t,"class","text-gray-500")},m(e,n){h(e,t,n)},p:T,d(e){e&&_(t)}}}function K(e){let t,n=e[0].products,l=[];for(let t=0;t<n.length;t+=1)l[t]=Y(L(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=M()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);h(e,t,n)},p(e,o){if(257&o[0]){let s;for(n=e[0].products,s=0;s<n.length;s+=1){const a=L(e,n,s);l[s]?l[s].p(a,o):(l[s]=Y(a),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){E(l,e),e&&_(t)}}}function Y(e){let t,n,s=e[8](e[25]).name+"";return{c(){t=l("span"),n=y(s),v(t,"class","inline-block p-2 rounded-lg text-xs bg-theme text-white m-1")},m(e,l){h(e,t,l),o(t,n)},p(e,t){1&t[0]&&s!==(s=e[8](e[25]).name+"")&&w(n,s)},d(e){e&&_(t)}}}function Z(e){let t,n,s,d,f,p,m,$,g,x,b,y,w,T,q,I,O,M,U,D,F,G,L,H,Q,R,W,Y,Z,ee,te,ne,le,oe,se,ae,ce,re,ue,ie,de,fe,pe,me,$e,ge;function ve(t){e[11].call(null,t)}let he={style:e[10],label:"Vendor Name",placeholder:"Enter vendor name"};function xe(t){e[12].call(null,t)}void 0!==e[0].name&&(he.value=e[0].name),s=new A({props:he}),k.push(()=>C(s,"value",ve));let be={style:e[10],prefix:"+6",label:"Phone",placeholder:"012345678"};function _e(t){e[13].call(null,t)}void 0!==e[0].phone&&(be.value=e[0].phone),p=new A({props:be}),k.push(()=>C(p,"value",xe));let ye={style:e[10],label:"Unit/Building No",placeholder:""};function we(t){e[14].call(null,t)}void 0!==e[0].unit_no&&(ye.value=e[0].unit_no),y=new A({props:ye}),k.push(()=>C(y,"value",_e));let ke={style:e[10],label:"Address",placeholder:""};function Ce(t){e[15].call(null,t)}void 0!==e[0].address&&(ke.value=e[0].address),q=new A({props:ke}),k.push(()=>C(q,"value",we));let Pe={style:e[10],label:"Postcode",placeholder:""};function je(t){e[16].call(null,t)}void 0!==e[0].postcode&&(Pe.value=e[0].postcode),U=new A({props:Pe}),k.push(()=>C(U,"value",Ce));let Ve={style:e[10],label:"Bank Branch",placeholder:"E.g : Maybank"};function Be(t){e[17].call(null,t)}void 0!==e[0].bank_type&&(Ve.value=e[0].bank_type),L=new A({props:Ve}),k.push(()=>C(L,"value",je));let Ne={style:e[10],label:"Bank Account",placeholder:"Account No"};void 0!==e[0].bank_acc&&(Ne.value=e[0].bank_acc),R=new A({props:Ne}),k.push(()=>C(R,"value",Be));let Ee=e[1].outlets,Se=[];for(let t=0;t<Ee.length;t+=1)Se[t]=X(z(e,Ee,t));function Te(e,t){return e[0].products.length>0?K:J}let qe=Te(e),Ie=qe(e);return{c(){t=l("div"),n=l("div"),a(s.$$.fragment),f=P(),a(p.$$.fragment),$=P(),g=l("p"),g.textContent="Business Details",x=P(),b=l("div"),a(y.$$.fragment),T=P(),a(q.$$.fragment),O=P(),M=l("div"),a(U.$$.fragment),F=P(),G=l("div"),a(L.$$.fragment),Q=P(),a(R.$$.fragment),Y=P(),Z=l("p"),Z.textContent="Vendor Products",ee=P(),te=l("div"),ne=l("label"),ne.textContent="Drop Point Outlet",le=P(),oe=l("select"),se=l("option"),se.textContent="Select Outlet";for(let e=0;e<Se.length;e+=1)Se[e].c();ae=P(),ce=l("label"),ce.textContent="Selected Products",re=P(),ue=l("div"),ie=l("div"),Ie.c(),de=P(),fe=l("i"),v(n,"class","flex mb-2"),v(g,"class","sect text-theme svelte-vywq0m"),v(b,"class","flex mb-2"),v(M,"class","flex mb-2"),v(G,"class","flex mb-2"),v(Z,"class","sect text-theme svelte-vywq0m"),v(ne,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),se.__value="",se.value=se.__value,v(oe,"class","text-xl my-2 w-48"),void 0===e[0].outlet_id&&j(()=>e[18].call(oe)),v(ce,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),v(ie,"class","flex-grow"),v(fe,"class","icon ion-md-expand text-gray-600 self-center"),v(ue,"class",pe="border rounded shadow-sm p-2 w-full flex cursor-pointer "+(e[3].length>0?"":"opacity-25")),v(te,"class","m-2"),v(t,"slot","content")},m(l,a){h(l,t,a),o(t,n),c(s,n,null),o(n,f),c(p,n,null),o(t,$),o(t,g),o(t,x),o(t,b),c(y,b,null),o(b,T),c(q,b,null),o(t,O),o(t,M),c(U,M,null),o(t,F),o(t,G),c(L,G,null),o(G,Q),c(R,G,null),o(t,Y),o(t,Z),o(t,ee),o(t,te),o(te,ne),o(te,le),o(te,oe),o(oe,se);for(let e=0;e<Se.length;e+=1)Se[e].m(oe,null);V(oe,e[0].outlet_id),o(te,ae),o(te,ce),o(te,re),o(te,ue),o(ue,ie),Ie.m(ie,null),o(ue,de),o(ue,fe),me=!0,$e||(ge=[B(oe,"change",e[18]),B(oe,"change",e[6]),B(ue,"click",e[9])],$e=!0)},p(e,t){const n={};!d&&1&t[0]&&(d=!0,n.value=e[0].name,N(()=>d=!1)),s.$set(n);const l={};!m&&1&t[0]&&(m=!0,l.value=e[0].phone,N(()=>m=!1)),p.$set(l);const o={};!w&&1&t[0]&&(w=!0,o.value=e[0].unit_no,N(()=>w=!1)),y.$set(o);const a={};!I&&1&t[0]&&(I=!0,a.value=e[0].address,N(()=>I=!1)),q.$set(a);const c={};!D&&1&t[0]&&(D=!0,c.value=e[0].postcode,N(()=>D=!1)),U.$set(c);const r={};!H&&1&t[0]&&(H=!0,r.value=e[0].bank_type,N(()=>H=!1)),L.$set(r);const u={};if(!W&&1&t[0]&&(W=!0,u.value=e[0].bank_acc,N(()=>W=!1)),R.$set(u),2&t[0]){let n;for(Ee=e[1].outlets,n=0;n<Ee.length;n+=1){const l=z(e,Ee,n);Se[n]?Se[n].p(l,t):(Se[n]=X(l),Se[n].c(),Se[n].m(oe,null))}for(;n<Se.length;n+=1)Se[n].d(1);Se.length=Ee.length}3&t[0]&&V(oe,e[0].outlet_id),qe===(qe=Te(e))&&Ie?Ie.p(e,t):(Ie.d(1),Ie=qe(e),Ie&&(Ie.c(),Ie.m(ie,null))),(!me||8&t[0]&&pe!==(pe="border rounded shadow-sm p-2 w-full flex cursor-pointer "+(e[3].length>0?"":"opacity-25")))&&v(ue,"class",pe)},i(e){me||(r(s.$$.fragment,e),r(p.$$.fragment,e),r(y.$$.fragment,e),r(q.$$.fragment,e),r(U.$$.fragment,e),r(L.$$.fragment,e),r(R.$$.fragment,e),me=!0)},o(e){u(s.$$.fragment,e),u(p.$$.fragment,e),u(y.$$.fragment,e),u(q.$$.fragment,e),u(U.$$.fragment,e),u(L.$$.fragment,e),u(R.$$.fragment,e),me=!1},d(e){e&&_(t),i(s),i(p),i(y),i(q),i(U),i(L),i(R),E(Se,e),Ie.d(),$e=!1,S(ge)}}}function ee(e){let t,n,o;return n=new D({props:{tools:e[5],style:e[4]}}),n.$on("selected",e[7]),{c(){t=l("div"),a(n.$$.fragment),v(t,"slot","toolbar")},m(e,l){h(e,t,l),c(n,t,null),o=!0},p:T,i(e){o||(r(n.$$.fragment,e),o=!0)},o(e){u(n.$$.fragment,e),o=!1},d(e){e&&_(t),i(n)}}}function te(e){let t,n,l;return{c(){t=P(),n=P(),l=P()},m(e,o){h(e,t,o),h(e,n,o),h(e,l,o)},p:T,i:T,o:T,d(e){e&&_(t),e&&_(n),e&&_(l)}}}function ne(e){let t,n;return t=new s({props:{style:{content:"overflow-y-scroll scrolling-touch"},$$slots:{default:[te],toolbar:[ee],content:[Z],title:[W],loader:[R]},$$scope:{ctx:e}}}),{c(){a(t.$$.fragment)},m(e,l){c(t,e,l),n=!0},p(e,n){const l={};15&n[0]|1&n[1]&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(r(t.$$.fragment,e),n=!0)},o(e){u(t.$$.fragment,e),n=!1},d(e){i(t,e)}}}function le(e,t,n){let l,o;d(e,f,e=>n(19,l=e)),d(e,p,e=>n(20,o=e));let s=!1,a=[],{vendor:c={}}=t,{account:r={}}=t;async function u(){let e;n(2,s=!0);try{e=await m(`https://db.getorders.app/products.sl.${r.franchise_id}.${c.outlet_id}.json`),"[object Array]"!=Object.prototype.toString.call(e)&&(e=void 0),console.log(e)}catch{console.log("S3 not found")}return e||(e=await m($("/guest/products"),{fran_id:r.franchise_id,outlet_id:c.outlet_id},"GET")),n(3,a=e),n(2,s=!1),a}""!=c.outlet_id&&u().then(e=>{n(0,c)}),f.subscribe(e=>{e.selected_prods&&(n(0,c.products=e.selected_prods,c),g(f,l={}))});return e.$$set=e=>{"vendor"in e&&n(0,c=e.vendor),"account"in e&&n(1,r=e.account)},[c,r,s,a,{container:"justify-end"},[{name:"Close",icon:"close-circle",function:"pop_modal"},{name:"Save",icon:"checkmark-circle",function:"save"}],function(){n(0,c.products=[],c),u()},function(e){"pop_modal"==e.detail.function&&q(),"save"==e.detail.function&&(n(2,s=!0),m($("/vendor"),c).then(e=>{g(f,l={vendor:e}),q()}))},function(e){return a.find(t=>t.id==parseInt(e.id))||{name:"-"}},function(){g(p,o=[...o,{selected_prods:c.products,products:a,view:G}])},{container:"w-1/2 mx-2"},function(e){c.name=e,n(0,c)},function(e){c.phone=e,n(0,c)},function(e){c.unit_no=e,n(0,c)},function(e){c.address=e,n(0,c)},function(e){c.postcode=e,n(0,c)},function(e){c.bank_type=e,n(0,c)},function(e){c.bank_acc=e,n(0,c)},function(){c.outlet_id=I(this),n(0,c),n(1,r)}]}class oe extends e{constructor(e){var s;super(),document.getElementById("svelte-vywq0m-style")||((s=l("style")).id="svelte-vywq0m-style",s.textContent=".sect.svelte-vywq0m{font-size:1.25rem;font-weight:700;margin-top:0.75rem;margin-left:0.5rem;margin-right:0.5rem}",o(document.head,s)),t(this,e,le,ne,n,{vendor:0,account:1},[-1,-1])}}function se(e,t,n){const l=e.slice();return l[11]=t[n],l}function ae(e){let t,n,o,s,a=e[0],c=[];for(let t=0;t<a.length;t+=1)c[t]=ue(se(e,a,t));const i=e=>u(c[e],1,1,()=>{c[e]=null});return{c(){t=l("div"),t.innerHTML='<div class="flex-grow">Vendor Name</div> \n    <div class="flex-none w-20">Products</div> \n    <div class="flex-none w-20">Outlet</div>',n=P();for(let e=0;e<c.length;e+=1)c[e].c();o=M(),v(t,"class","flex p-3 text-gray-400 font-semibold uppercase text-xs")},m(e,l){h(e,t,l),h(e,n,l);for(let t=0;t<c.length;t+=1)c[t].m(e,l);h(e,o,l),s=!0},p(e,t){if(161&t){let n;for(a=e[0],n=0;n<a.length;n+=1){const l=se(e,a,n);c[n]?(c[n].p(l,t),r(c[n],1)):(c[n]=ue(l),c[n].c(),r(c[n],1),c[n].m(o.parentNode,o))}for(x(),n=a.length;n<c.length;n+=1)i(n);b()}},i(e){if(!s){for(let e=0;e<a.length;e+=1)r(c[e]);s=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)u(c[e]);s=!1},d(e){e&&_(t),e&&_(n),E(c,e),e&&_(o)}}}function ce(e){let t,n;return t=new O({props:{type:"h-64",$$slots:{message:[ie]},$$scope:{ctx:e}}}),{c(){a(t.$$.fragment)},m(e,l){c(t,e,l),n=!0},p(e,n){const l={};16384&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(r(t.$$.fragment,e),n=!0)},o(e){u(t.$$.fragment,e),n=!1},d(e){i(t,e)}}}function re(e){let t,n,s,a,c,r,u,i,d,f,p,m,$,g=e[11].name+"",x=e[11].products.length+"",b=e[7](e[11].outlet_id).name+"";function k(...t){return e[8](e[11],...t)}return{c(){t=l("div"),n=l("div"),s=y(g),a=P(),c=l("div"),r=y(x),u=y(" items"),i=P(),d=l("div"),f=y(b),p=P(),v(n,"class","flex-grow"),v(c,"class","flex-none w-20"),v(d,"class","flex-none w-20 text-left"),v(t,"class","flex w-full p-3")},m(e,l){h(e,t,l),o(t,n),o(n,s),o(t,a),o(t,c),o(c,r),o(c,u),o(t,i),o(t,d),o(d,f),h(e,p,l),m||($=B(t,"click",k),m=!0)},p(t,n){e=t,1&n&&g!==(g=e[11].name+"")&&w(s,g),1&n&&x!==(x=e[11].products.length+"")&&w(r,x),1&n&&b!==(b=e[7](e[11].outlet_id).name+"")&&w(f,b)},d(e){e&&_(t),e&&_(p),m=!1,$()}}}function ue(e){let t,n;return t=new F({props:{$$slots:{default:[re]},$$scope:{ctx:e}}}),{c(){a(t.$$.fragment)},m(e,l){c(t,e,l),n=!0},p(e,n){const l={};16385&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(r(t.$$.fragment,e),n=!0)},o(e){u(t.$$.fragment,e),n=!1},d(e){i(t,e)}}}function ie(e){let t;return{c(){t=l("div"),t.textContent="One Moment Please..",v(t,"slot","message")},m(e,n){h(e,t,n)},d(e){e&&_(t)}}}function de(e){let t,n,l,o,s,d;t=new D({props:{style:e[3],tools:e[4]}}),t.$on("selected",e[6]);const f=[ce,ae],p=[];function m(e,t){return e[0]&&e[1]&&!e[2]?1:0}return l=m(e),o=p[l]=f[l](e),{c(){a(t.$$.fragment),n=P(),o.c(),s=M()},m(e,o){c(t,e,o),h(e,n,o),p[l].m(e,o),h(e,s,o),d=!0},p(e,[t]){let n=l;l=m(e),l===n?p[l].p(e,t):(x(),u(p[n],1,1,()=>{p[n]=null}),b(),o=p[l],o||(o=p[l]=f[l](e),o.c()),r(o,1),o.m(s.parentNode,s))},i(e){d||(r(t.$$.fragment,e),r(o),d=!0)},o(e){u(t.$$.fragment,e),u(o),d=!1},d(e){i(t,e),e&&_(n),p[l].d(e),e&&_(s)}}}function fe(e,t,n){let l,o;d(e,p,e=>n(9,l=e)),d(e,f,e=>n(10,o=e));let s,a;function c(e){g(p,l=[...l,{vendor:e,account:a[0],view:oe}])}U(()=>{m($("/vendor")).then(e=>{n(0,s=e)}),m($("/accounts")).then(e=>{n(1,a=e)})}),f.subscribe(e=>{if(e.vendor){let t=s.find(t=>t._id==e.vendor._id);n(0,s=t?s.map(t=>t._id==e.vendor._id?e.vendor:t):[...s,e.vendor]),g(f,o={})}});return[s,a,!1,{container:"border-b border-gray-300"},[{name:"Create",icon:"add",function:"add"}],c,function(e){if("add"==e.detail.function){let e={name:"",phone:"",address:"",unit_no:"",postcode:"",products:[],bank_type:"",bank_acc:"",notes:"",outlet_id:""};g(p,l=[...l,{vendor:{...e},account:a[0],view:oe}])}},function(e){return a[0].outlets.find(t=>""+t.id==e)||{name:"-"}},e=>{c(e)}]}export default class extends e{constructor(e){super(),t(this,e,fe,de,n,{})}}
//# sourceMappingURL=Vendors-2ec443dd.js.map
