import{S as e,i as t,s as n,e as s,v as l,a as o,b as a,d as i,f as r,l as u,x as c,p as d,y as g,I as f,j as p,k as m,q as v,a6 as $,t as h,E as b,o as x,F as y,z as _,B as w,G as k,C as N,H as R,D as T,W as j,J as A,P as C,R as D,O as M,M as P,N as I}from"./App-030e40b2.js";import{T as F}from"./UITextField-bc893901.js";import{T as H}from"./UIToolbar-f04f798e.js";function L(e,t,n){const s=e.slice();return s[8]=t[n],s[10]=n,s}function O(e){let t,n,g,f,p,m=e[8].name+"";function v(...t){return e[7](e[8],...t)}return{c(){t=s("button"),n=l(m),g=o(),a(t,"class",f="bg-gray-"+(e[8].value==e[0]?"600":"200")+" text-gray-"+(e[8].value==e[0]?"100":"600")+" font-bold py-2 px-4 "+e[5](e[10]))},m(e,s,l){i(e,t,s),r(t,n),r(t,g),l&&p(),p=u(t,"mousedown",v)},p(s,l){e=s,2&l&&m!==(m=e[8].name+"")&&c(n,m),3&l&&f!==(f="bg-gray-"+(e[8].value==e[0]?"600":"200")+" text-gray-"+(e[8].value==e[0]?"100":"600")+" font-bold py-2 px-4 "+e[5](e[10]))&&a(t,"class",f)},d(e){e&&d(t),p()}}}function U(e){let t,n,u,p,m,v,$=e[1],h=[];for(let t=0;t<$.length;t+=1)h[t]=O(L(e,$,t));return{c(){t=s("div"),n=s("label"),u=l(e[3]),m=o();for(let e=0;e<h.length;e+=1)h[e].c();a(n,"class",p="flex-none self-center text-xs uppercase text-gray-500 font-semibold "+(e[2].label||"w-20")),a(t,"class",v="inline-flex "+e[2].container)},m(e,s){i(e,t,s),r(t,n),r(n,u),r(t,m);for(let e=0;e<h.length;e+=1)h[e].m(t,null)},p(e,[s]){if(8&s&&c(u,e[3]),4&s&&p!==(p="flex-none self-center text-xs uppercase text-gray-500 font-semibold "+(e[2].label||"w-20"))&&a(n,"class",p),51&s){let n;for($=e[1],n=0;n<$.length;n+=1){const l=L(e,$,n);h[n]?h[n].p(l,s):(h[n]=O(l),h[n].c(),h[n].m(t,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=$.length}4&s&&v!==(v="inline-flex "+e[2].container)&&a(t,"class",v)},i:g,o:g,d(e){e&&d(t),f(h,e)}}}function B(e,t,n){let{segments:s=[]}=t,{selected:l={}}=t,{value:o=""}=t,{style:a={}}=t,{label:i=""}=t;function r(e){n(6,l=e),n(0,o=e.value)}return e.$set=e=>{"segments"in e&&n(1,s=e.segments),"selected"in e&&n(6,l=e.selected),"value"in e&&n(0,o=e.value),"style"in e&&n(2,a=e.style),"label"in e&&n(3,i=e.label)},[o,s,a,i,r,function(e){return 0==e?"rounded-l":e==s.length-1?"rounded-r":""},l,e=>r(e)]}class S extends e{constructor(e){super(),t(this,e,B,U,n,{segments:1,selected:6,value:0,style:2,label:3})}}function q(e,t,n){const s=e.slice();return s[7]=t[n],s[9]=n,s}function z(e){let t,n,l,c,g,f,h,b,x;function y(...t){return e[6](e[9],...t)}return{c(){t=s("div"),n=s("input"),c=o(),g=s("button"),g.innerHTML='<i class="icon ion-md-close text-xl"></i>',f=o(),a(n,"type","text"),a(n,"class","flex-grow bg-gray-100 self-center"),a(n,"placeholder",e[2]),n.value=l=e[7],a(g,"class","flex-none ml-2"),a(t,"class","flex rounded-lg bg-gray-100 p-2 my-2")},m(e,s,l){i(e,t,s),r(t,n),r(t,c),r(t,g),r(t,f),b=!0,l&&x(),x=u(g,"click",y)},p(t,s){e=t,(!b||4&s)&&a(n,"placeholder",e[2]),(!b||1&s&&l!==(l=e[7])&&n.value!==l)&&(n.value=l)},i(e){b||(p(()=>{h||(h=m(t,$,{duration:300,easing:v},!0)),h.run(1)}),b=!0)},o(e){h||(h=m(t,$,{duration:300,easing:v},!1)),h.run(0),b=!1},d(e){e&&d(t),e&&h&&h.end(),x()}}}function E(e){let t,n,g,p,m,v,$,_,w,k,N=e[0],R=[];for(let t=0;t<N.length;t+=1)R[t]=z(q(e,N,t));const T=e=>x(R[e],1,1,()=>{R[e]=null});return{c(){t=s("div"),n=s("div"),g=s("label"),p=l(e[1]),m=o(),v=s("button"),v.innerHTML='<i class="icon ion-md-add text-xl"></i>',$=o();for(let e=0;e<R.length;e+=1)R[e].c();a(g,"class","flex-grow self-center text-xs uppercase text-gray-500 font-semibold"),a(v,"class","flex-none"),a(n,"class","flex"),a(t,"class",_=e[3].container)},m(s,l,o){i(s,t,l),r(t,n),r(n,g),r(g,p),r(n,m),r(n,v),r(t,$);for(let e=0;e<R.length;e+=1)R[e].m(t,null);w=!0,o&&k(),k=u(v,"click",e[4])},p(e,[n]){if((!w||2&n)&&c(p,e[1]),37&n){let s;for(N=e[0],s=0;s<N.length;s+=1){const l=q(e,N,s);R[s]?(R[s].p(l,n),h(R[s],1)):(R[s]=z(l),R[s].c(),h(R[s],1),R[s].m(t,null))}for(b(),s=N.length;s<R.length;s+=1)T(s);y()}(!w||8&n&&_!==(_=e[3].container))&&a(t,"class",_)},i(e){if(!w){for(let e=0;e<N.length;e+=1)h(R[e]);w=!0}},o(e){R=R.filter(Boolean);for(let e=0;e<R.length;e+=1)x(R[e]);w=!1},d(e){e&&d(t),f(R,e),k()}}}function G(e,t,n){let{value:s=[]}=t,{label:l=""}=t,{placeholder:o=""}=t,{style:a={}}=t;function i(e){n(0,s=[...s.slice(0,e),...s.slice(e+1,s.length)])}return e.$set=e=>{"value"in e&&n(0,s=e.value),"label"in e&&n(1,l=e.label),"placeholder"in e&&n(2,o=e.placeholder),"style"in e&&n(3,a=e.style)},[s,l,o,a,function(){n(0,s=[...s,""])},i,e=>i(e)]}class J extends e{constructor(e){super(),t(this,e,G,E,n,{value:0,label:1,placeholder:2,style:3})}}function W(e){let t,n,u,g,f,p,m,v,$,b,y,R,T,j,A,M,P,I,H,L,O,U,B,q,z,E,G,W,K,Q,V,X,Y,Z=e[0].settings.short_id+"";function ee(t){e[6].call(null,t)}let te={style:e[3],label:"Name"};void 0!==e[0].settings.name&&(te.value=e[0].settings.name);const ne=new F({props:te});function se(t){e[7].call(null,t)}C.push(()=>D(ne,"value",ee));let le={style:e[3],label:"Identifier"};void 0!==e[0].settings.short_id&&(le.value=e[0].settings.short_id);const oe=new F({props:le});function ae(t){e[8].call(null,t)}C.push(()=>D(oe,"value",se));let ie={style:e[3],label:"Delivery Fees"};void 0!==e[0].settings.delivery_fees&&(ie.value=e[0].settings.delivery_fees);const re=new F({props:ie});function ue(t){e[9].call(null,t)}C.push(()=>D(re,"value",ae));let ce={style:e[3],label:"Phone Number"};void 0!==e[0].settings.phone&&(ce.value=e[0].settings.phone);const de=new F({props:ce});function ge(t){e[10].call(null,t)}C.push(()=>D(de,"value",ue));let fe={style:e[3],label:"Checkout Notes"};void 0!==e[0].settings.checkout_notes&&(fe.value=e[0].settings.checkout_notes);const pe=new F({props:fe});function me(t){e[11].call(null,t)}C.push(()=>D(pe,"value",ge));let ve={style:e[3],label:"Order Methods",segments:[{name:"All",value:""},{name:"No Delivery",value:"no_delivery"}]};void 0!==e[0].settings.order_methods&&(ve.value=e[0].settings.order_methods);const $e=new S({props:ve});function he(t){e[12].call(null,t)}C.push(()=>D($e,"value",me));let be={style:e[3],label:"Multiplier"};void 0!==e[0].settings.multiplier&&(be.value=e[0].settings.multiplier);const xe=new F({props:be});function ye(t){e[13].call(null,t)}C.push(()=>D(xe,"value",he));let _e={style:e[3],label:"Rounding",segments:[{name:"No Rounding",value:""},{name:"Round Down",value:"round_down"},{name:"Round Up",value:"round_up"}]};void 0!==e[0].settings.rounding&&(_e.value=e[0].settings.rounding);const we=new S({props:_e});function ke(t){e[14].call(null,t)}C.push(()=>D(we,"value",ye));let Ne={style:e[3],label:"Deduction Presets",placeholder:"e.g : 100"};void 0!==e[0].settings.deduct_presets&&(Ne.value=e[0].settings.deduct_presets);const Re=new J({props:Ne});return C.push(()=>D(Re,"value",ke)),{c(){t=s("p"),t.textContent="Account",n=o(),u=s("div"),_(ne.$$.fragment),f=o(),p=s("p"),p.textContent="Orders",m=o(),v=s("div"),_(oe.$$.fragment),b=o(),y=s("p"),R=s("a"),T=l("https://instant.getorders.app/?m="),j=l(Z),M=o(),_(re.$$.fragment),I=o(),_(de.$$.fragment),L=o(),_(pe.$$.fragment),U=o(),_($e.$$.fragment),q=o(),z=s("p"),z.textContent="Loyalty",E=o(),G=s("div"),_(xe.$$.fragment),K=o(),_(we.$$.fragment),V=o(),_(Re.$$.fragment),a(t,"class","text-xl font-bold mt-3"),a(u,"class","flex"),a(p,"class","text-xl font-bold mt-3"),a(R,"href",A="https://instant.getorders.app/?m="+e[0].settings.short_id),a(R,"target","_blank"),a(y,"class","text-xs px-3 mb-3 font-semibold"),a(z,"class","text-xl font-bold mt-3")},m(e,s){i(e,t,s),i(e,n,s),i(e,u,s),w(ne,u,null),i(e,f,s),i(e,p,s),i(e,m,s),i(e,v,s),w(oe,v,null),r(v,b),r(v,y),r(y,R),r(R,T),r(R,j),r(v,M),w(re,v,null),r(v,I),w(de,v,null),r(v,L),w(pe,v,null),r(v,U),w($e,v,null),i(e,q,s),i(e,z,s),i(e,E,s),i(e,G,s),w(xe,G,null),r(G,K),w(we,G,null),r(G,V),w(Re,G,null),Y=!0},p(e,t){const n={};!g&&1&t&&(g=!0,n.value=e[0].settings.name,k(()=>g=!1)),ne.$set(n);const s={};!$&&1&t&&($=!0,s.value=e[0].settings.short_id,k(()=>$=!1)),oe.$set(s),(!Y||1&t)&&Z!==(Z=e[0].settings.short_id+"")&&c(j,Z),(!Y||1&t&&A!==(A="https://instant.getorders.app/?m="+e[0].settings.short_id))&&a(R,"href",A);const l={};!P&&1&t&&(P=!0,l.value=e[0].settings.delivery_fees,k(()=>P=!1)),re.$set(l);const o={};!H&&1&t&&(H=!0,o.value=e[0].settings.phone,k(()=>H=!1)),de.$set(o);const i={};!O&&1&t&&(O=!0,i.value=e[0].settings.checkout_notes,k(()=>O=!1)),pe.$set(i);const r={};!B&&1&t&&(B=!0,r.value=e[0].settings.order_methods,k(()=>B=!1)),$e.$set(r);const u={};!W&&1&t&&(W=!0,u.value=e[0].settings.multiplier,k(()=>W=!1)),xe.$set(u);const d={};!Q&&1&t&&(Q=!0,d.value=e[0].settings.rounding,k(()=>Q=!1)),we.$set(d);const f={};!X&&1&t&&(X=!0,f.value=e[0].settings.deduct_presets,k(()=>X=!1)),Re.$set(f)},i(e){Y||(h(ne.$$.fragment,e),h(oe.$$.fragment,e),h(re.$$.fragment,e),h(de.$$.fragment,e),h(pe.$$.fragment,e),h($e.$$.fragment,e),h(xe.$$.fragment,e),h(we.$$.fragment,e),h(Re.$$.fragment,e),Y=!0)},o(e){x(ne.$$.fragment,e),x(oe.$$.fragment,e),x(re.$$.fragment,e),x(de.$$.fragment,e),x(pe.$$.fragment,e),x($e.$$.fragment,e),x(xe.$$.fragment,e),x(we.$$.fragment,e),x(Re.$$.fragment,e),Y=!1},d(e){e&&d(t),e&&d(n),e&&d(u),N(ne),e&&d(f),e&&d(p),e&&d(m),e&&d(v),N(oe),N(re),N(de),N(pe),N($e),e&&d(q),e&&d(z),e&&d(E),e&&d(G),N(xe),N(we),N(Re)}}}function K(e){let t,n,s;const l=new H({props:{class:"border-b border-gray-300",tools:e[1]}});l.$on("selected",e[2]);let a=e[0].settings&&W(e);return{c(){_(l.$$.fragment),t=o(),a&&a.c(),n=R()},m(e,o){w(l,e,o),i(e,t,o),a&&a.m(e,o),i(e,n,o),s=!0},p(e,[t]){e[0].settings?a?(a.p(e,t),h(a,1)):(a=W(e),a.c(),h(a,1),a.m(n.parentNode,n)):a&&(b(),x(a,1,1,()=>{a=null}),y())},i(e){s||(h(l.$$.fragment,e),h(a),s=!0)},o(e){x(l.$$.fragment,e),x(a),s=!1},d(e){N(l,e),e&&d(t),a&&a.d(e),e&&d(n)}}}function Q(e,t,n){let s,l;T(e,j,e=>n(4,s=e)),T(e,A,e=>n(0,l=e));return[l,[{name:"Save",icon:"cloud-done",function:"save"}],function(e){switch(e.detail.function){case"save":M(j,s=!0),fetch(P("/settings"),I(l.settings)).then(e=>e.json()).then(e=>{M(A,l=e),M(j,s=!1)}).catch(e=>{})}},{container:"p-2 w-1/2 flex-none",label:"w-32"},s,{Account:{name:{desc:"Account name",value:"",key:"name"}},Points:{multiplier:{desc:"Points awarded per spending",value:1,key:"multiplier"},rounding:{desc:"Rounding for spending amount",value:["no_rounding","round_down","round_up"],key:"rounding"}}},function(e){l.settings.name=e,A.set(l)},function(e){l.settings.short_id=e,A.set(l)},function(e){l.settings.delivery_fees=e,A.set(l)},function(e){l.settings.phone=e,A.set(l)},function(e){l.settings.checkout_notes=e,A.set(l)},function(e){l.settings.order_methods=e,A.set(l)},function(e){l.settings.multiplier=e,A.set(l)},function(e){l.settings.rounding=e,A.set(l)},function(e){l.settings.deduct_presets=e,A.set(l)}]}export default class extends e{constructor(e){super(),t(this,e,Q,K,n,{})}}
//# sourceMappingURL=Settings-173ba0c7.js.map
