import{S as t,i as e,s as n,M as s,j as a,m as o,k as r,o as l,p as i,q as c,z as d,e as u,b as m,c as p,h as f,a as g,d as x,w as h,l as y,Q as $,n as v,ah as b,U as w,ai as _,D as T,E as M,aj as C,r as k,u as D,G as N,H as O,v as F,t as A,g as E,x as I,y as R,F as S,L as j,a0 as U}from"./App-b2a4afcd.js";import{T as P}from"./UIToolbar-db7a75c2.js";import{S as Y}from"./UISegmented-74b52ecc.js";import{c as L,a as H,d as z}from"./dayjs.min-d290c2ff.js";function G(t){let e;return{c(){e=u("div"),e.textContent="Activate GetPayments",m(e,"slot","title"),m(e,"class","font-semibold text-xl text-gray-600 pb-3")},m(t,n){p(t,e,n)},d(t){t&&f(e)}}}function q(t){let e,n,s,a,o,r,l,i,c;return{c(){e=u("div"),n=u("p"),n.innerHTML="\n            In order to accept payments, your account has to first activate <b>GetPayments</b>.<br>\n            Tap here to contact our support to activate now.\n        ",s=g(),a=u("div"),o=u("button"),o.textContent="Contact Support",r=g(),l=u("div"),i=u("button"),i.textContent="Cancel",m(n,"class","text-gray-800 mb-6 text-center"),m(o,"class","p-2 w-1/2 shadow-md bg-theme text-white rounded-lg capitalize font-bold h-full shadow-md"),m(a,"class","flex justify-center mt-2"),m(i,"class","p-2 w-1/2 shadow-md bg-gray-400 text-white rounded-lg capitalize font-bold h-full shadow-md"),m(l,"class","flex justify-center mt-2"),m(e,"slot","content"),m(e,"class","h-64 p-2")},m(d,u,m){p(d,e,u),x(e,n),x(e,s),x(e,a),x(a,o),x(e,r),x(e,l),x(l,i),m&&h(c),c=[y(o,"click",t[0]),y(i,"click",$)]},p:v,d(t){t&&f(e),h(c)}}}function B(t){let e;return{c(){e=g()},m(t,n){p(t,e,n)},p:v,d(t){t&&f(e)}}}function J(t){let e;const n=new s({props:{$$slots:{default:[B],content:[q],title:[G]},$$scope:{ctx:t}}});return{c(){a(n.$$.fragment)},m(t,s){o(n,t,s),e=!0},p(t,[e]){const s={};4&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function K(t,e,n){let s;return c(t,d,t=>n(1,s=t)),[function(){b(`Hello, I would like to activate payments for my GetOrders account.\n üëâüèª My ID : ${s.settings.fire_id}`)}]}class Q extends t{constructor(t){super(),e(this,t,K,J,n,{})}}var W=L((function(t,e){t.exports=function(t,e,n){var s=e.prototype;n.en.relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};var a=function(t,e,s,a){for(var o,r,l,i=s.$locale().relativeTime,c=[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],d=c.length,u=0;u<d;u+=1){var m=c[u];m.d&&(o=a?n(t).diff(s,m.d,!0):s.diff(t,m.d,!0));var p=Math.round(Math.abs(o));if(l=o>0,p<=m.r||!m.r){1===p&&u>0&&(m=c[u-1]);var f=i[m.l];r="string"==typeof f?f.replace("%d",p):f(p,e,m.l,l);break}}return e?r:(l?i.future:i.past).replace("%s",r)};s.to=function(t,e){return a(t,e,this,!0)},s.from=function(t,e){return a(t,e,this)};var o=function(t){return t.$u?n.utc():n()};s.toNow=function(t){return this.to(o(this),t)},s.fromNow=function(t){return this.from(o(this),t)}}}));function Z(t,e,n){const s=t.slice();return s[18]=e[n],s}function V(t,e,n){const s=t.slice();return s[21]=e[n],s}function X(t,e,n){const s=t.slice();return s[15]=e[n],s[17]=n,s}function tt(t){let e;const n=new j({props:{$$slots:{message:[et]},$$scope:{ctx:t}}});return{c(){a(n.$$.fragment)},m(t,s){o(n,t,s),e=!0},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function et(t){let e;return{c(){e=u("div"),e.textContent="One Moment Please..",m(e,"slot","message")},m(t,n){p(t,e,n)},d(t){t&&f(e)}}}function nt(t){let e,n,s=t[2]&&tt(t);return{c(){e=u("div"),s&&s.c(),m(e,"slot","loader")},m(t,a){p(t,e,a),s&&s.m(e,null),n=!0},p(t,n){t[2]?s?r(s,1):(s=tt(t),s.c(),r(s,1),s.m(e,null)):s&&(k(),l(s,1,1,()=>{s=null}),D())},i(t){n||(r(s),n=!0)},o(t){l(s),n=!1},d(t){t&&f(e),s&&s.d()}}}function st(t){let e,n,s;function c(e){t[14].call(null,e)}let d={style:t[7],segments:t[9]};void 0!==t[3]&&(d.value=t[3]);const g=new Y({props:d});return N.push(()=>O(g,"value",c)),{c(){e=u("div"),a(g.$$.fragment),m(e,"slot","title"),m(e,"class","font-semibold text-xl text-gray-600")},m(t,n){p(t,e,n),o(g,e,null),s=!0},p(t,e){const s={};!n&&8&e&&(n=!0,s.value=t[3],F(()=>n=!1)),g.$set(s)},i(t){s||(r(g.$$.fragment,t),s=!0)},o(t){l(g.$$.fragment,t),s=!1},d(t){t&&f(e),i(g)}}}function at(t){let e,n,s,a=bt(t[0].guest.phone)+"";return{c(){e=u("p"),n=u("a"),m(n,"href",s="tel:"+t[0].guest.phone),m(e,"class","leading-tight text-lg text-gray-700 mb-2")},m(t,s){p(t,e,s),x(e,n),n.innerHTML=a},p(t,e){1&e&&a!==(a=bt(t[0].guest.phone)+"")&&(n.innerHTML=a),1&e&&s!==(s="tel:"+t[0].guest.phone)&&m(n,"href",s)},d(t){t&&f(e)}}}function ot(t){let e;return{c(){e=u("p"),e.textContent="PICKUP ORDER",m(e,"class","text-sm text-theme uppercase")},m(t,n){p(t,e,n)},p:v,d(t){t&&f(e)}}}function rt(t){let e,n,s,a,o=vt(t[0].guest.address)+"",r=vt(t[0].guest.address2)+"";return{c(){e=u("p"),n=A(o),s=g(),a=A(r),m(e,"class","text-sm text-theme uppercase")},m(t,o){p(t,e,o),x(e,n),x(e,s),x(e,a)},p(t,e){1&e&&o!==(o=vt(t[0].guest.address)+"")&&E(n,o),1&e&&r!==(r=vt(t[0].guest.address2)+"")&&E(a,r)},d(t){t&&f(e)}}}function lt(t){let e,n=t[15].variant,s=[];for(let e=0;e<n.length;e+=1)s[e]=it(V(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=I()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);p(t,e,n)},p(t,a){if(1&a){let o;for(n=t[15].variant,o=0;o<n.length;o+=1){const r=V(t,n,o);s[o]?s[o].p(r,a):(s[o]=it(r),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){R(s,t),t&&f(e)}}}function it(t){let e,n,s,a=t[21].name+"";return{c(){e=u("p"),n=A(a),s=g(),m(e,"class","text-sm text-gray-700")},m(t,a){p(t,e,a),x(e,n),x(e,s)},p(t,e){1&e&&a!==(a=t[21].name+"")&&E(n,a)},d(t){t&&f(e)}}}function ct(t){let e,n,s,a=wt(t[18])+"";return{c(){e=u("p"),n=A(a),s=g(),m(e,"class","text-sm text-gray-700")},m(t,a){p(t,e,a),x(e,n),x(e,s)},p(t,e){1&e&&a!==(a=wt(t[18])+"")&&E(n,a)},d(t){t&&f(e)}}}function dt(t){let e,n,s,a,o,r,l,i,c,d,h,y,$,v,b,w=t[15].quantity+"",_=(t[15].name||"")+"",T=parseFloat(t[15].unit_price||0).toFixed(2)+"",M=t[15].variant&&lt(t),C=t[15].modifiers,k=[];for(let e=0;e<C.length;e+=1)k[e]=ct(Z(t,C,e));return{c(){e=u("div"),n=u("div"),s=u("span"),a=A(w),o=A("x"),r=g(),l=u("div"),i=u("p"),c=A(_),d=g(),M&&M.c(),h=g();for(let t=0;t<k.length;t+=1)k[t].c();y=g(),$=u("div"),v=A(T),m(s,"class","table-cell align-middle"),m(n,"class","flex-none w-10 h-10 text-center rounded-lg bg-gray-200 table text-sm text-gray-700"),m(i,"class","font-semibold"),m(l,"class","flex-grow px-2"),m($,"class","flex-none w-20 text-right text-sm text-gray-700"),m(e,"class",b="flex "+(t[17]<t[0].cart.length-1?"border-b":"")+" mx-2 p-2 border-gray-200 list-item")},m(t,u){p(t,e,u),x(e,n),x(n,s),x(s,a),x(s,o),x(e,r),x(e,l),x(l,i),x(i,c),x(l,d),M&&M.m(l,null),x(l,h);for(let t=0;t<k.length;t+=1)k[t].m(l,null);x(e,y),x(e,$),x($,v)},p(t,n){if(1&n&&w!==(w=t[15].quantity+"")&&E(a,w),1&n&&_!==(_=(t[15].name||"")+"")&&E(c,_),t[15].variant?M?M.p(t,n):(M=lt(t),M.c(),M.m(l,h)):M&&(M.d(1),M=null),1&n){let e;for(C=t[15].modifiers,e=0;e<C.length;e+=1){const s=Z(t,C,e);k[e]?k[e].p(s,n):(k[e]=ct(s),k[e].c(),k[e].m(l,null))}for(;e<k.length;e+=1)k[e].d(1);k.length=C.length}1&n&&T!==(T=parseFloat(t[15].unit_price||0).toFixed(2)+"")&&E(v,T),1&n&&b!==(b="flex "+(t[17]<t[0].cart.length-1?"border-b":"")+" mx-2 p-2 border-gray-200 list-item")&&m(e,"class",b)},d(t){t&&f(e),M&&M.d(),R(k,t)}}}function ut(t){let e,n,s,a,o,r,l,i=parseFloat(t[0].delivery_fees).toFixed(2)+"";return{c(){e=u("div"),n=u("p"),s=A("Delivery charges of "),a=u("b"),o=A("RM"),r=A(i),l=A(" applies for delivery."),m(n,"class","text-green-500"),m(e,"class","p-2 text-right text-sm")},m(t,i){p(t,e,i),x(e,n),x(n,s),x(n,a),x(a,o),x(a,r),x(n,l)},p(t,e){1&e&&i!==(i=parseFloat(t[0].delivery_fees).toFixed(2)+"")&&E(r,i)},d(t){t&&f(e)}}}function mt(t){let e,n,s,a,o,r,l,i,c=t[0].tax.value+"",d=parseFloat(t[0].tax.amount).toFixed(2)+"";return{c(){e=u("div"),n=u("p"),s=A("SST Tax ("),a=A(c),o=A("%) : "),r=u("b"),l=A("RM"),i=A(d),m(n,"class","text-green-500"),m(e,"class","p-2 text-right text-sm")},m(t,c){p(t,e,c),x(e,n),x(n,s),x(n,a),x(n,o),x(n,r),x(r,l),x(r,i)},p(t,e){1&e&&c!==(c=t[0].tax.value+"")&&E(a,c),1&e&&d!==(d=parseFloat(t[0].tax.amount).toFixed(2)+"")&&E(i,d)},d(t){t&&f(e)}}}function pt(t){let e,n,s=(t[0].status>4||t[0].payment&&t[0].payment.paidAt?`This invoice has been paid. ${t[0].payment?"(RM"+t[0].payment.amount.toFixed(2)+")":"-"}`:"Unpaid Invoice")+"";return{c(){e=u("p"),n=A(s),m(e,"class","text-center text-theme font-semibold")},m(t,s){p(t,e,s),x(e,n)},p(t,e){1&e&&s!==(s=(t[0].status>4||t[0].payment&&t[0].payment.paidAt?`This invoice has been paid. ${t[0].payment?"(RM"+t[0].payment.amount.toFixed(2)+")":"-"}`:"Unpaid Invoice")+"")&&E(n,s)},d(t){t&&f(e)}}}function ft(t){let e,n,s,a,o,r=t[0].notes+"";return{c(){e=u("div"),n=u("p"),s=u("b"),s.textContent="Notes :",a=g(),o=A(r),m(n,"class","text"),m(e,"class","p-2 text-left text-sm")},m(t,r){p(t,e,r),x(e,n),x(n,s),x(n,a),x(n,o)},p(t,e){1&e&&r!==(r=t[0].notes+"")&&E(o,r)},d(t){t&&f(e)}}}function gt(t){let e,n,s,a,o,r,l,i,c,d,h,y,$,v,b,w,_,T,M,C,k,D,N=t[0].guest.name+"",O=z().to(z(t[0].createdAt))+"",F=parseFloat(t[0].grand_total).toFixed(2)+"",I=t[0].guest.phone&&at(t);function S(t,e){return t[0].guest.address&&2==t[0].method?rt:ot}let j=S(t),U=j(t),P=t[0].cart,Y=[];for(let e=0;e<P.length;e+=1)Y[e]=dt(X(t,P,e));let L=t[0].delivery_fees&&2==t[0].method&&ut(t),H=t[0].tax&&mt(t),G=t[0].payment&&pt(t),q=t[0].notes&&ft(t);return{c(){e=u("div"),n=u("div"),s=u("p"),a=A(N),o=g(),I&&I.c(),r=g(),U.c(),l=g(),i=u("div"),c=A(O),d=g();for(let t=0;t<Y.length;t+=1)Y[t].c();h=g(),y=u("div"),L&&L.c(),$=g(),H&&H.c(),v=g(),b=u("div"),w=u("div"),w.textContent="Grand Total",_=g(),T=u("div"),M=A("RM"),C=A(F),k=g(),G&&G.c(),D=g(),q&&q.c(),m(s,"class","leading-tight font-semibold"),m(n,"class","m-2"),m(i,"class","rounded-lg bg-teal-400 text-white text-sm font-semibold m-2 p-2"),m(w,"class","flex-grow text-left"),m(T,"class","flex-grow text-right ml-2"),m(b,"class","flex px-2 mb-2 font-bold"),m(y,"class","flex-none w-full bg-gray-100 shadow-xs p-3 text-center"),m(e,"slot","content"),m(e,"class","p-2")},m(t,u){p(t,e,u),x(e,n),x(n,s),x(s,a),x(n,o),I&&I.m(n,null),x(n,r),U.m(n,null),x(e,l),x(e,i),x(i,c),x(e,d);for(let t=0;t<Y.length;t+=1)Y[t].m(e,null);x(e,h),x(e,y),L&&L.m(y,null),x(y,$),H&&H.m(y,null),x(y,v),x(y,b),x(b,w),x(b,_),x(b,T),x(T,M),x(T,C),x(y,k),G&&G.m(y,null),x(y,D),q&&q.m(y,null)},p(t,s){if(1&s&&N!==(N=t[0].guest.name+"")&&E(a,N),t[0].guest.phone?I?I.p(t,s):(I=at(t),I.c(),I.m(n,r)):I&&(I.d(1),I=null),j===(j=S(t))&&U?U.p(t,s):(U.d(1),U=j(t),U&&(U.c(),U.m(n,null))),1&s&&O!==(O=z().to(z(t[0].createdAt))+"")&&E(c,O),1&s){let n;for(P=t[0].cart,n=0;n<P.length;n+=1){const a=X(t,P,n);Y[n]?Y[n].p(a,s):(Y[n]=dt(a),Y[n].c(),Y[n].m(e,h))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=P.length}t[0].delivery_fees&&2==t[0].method?L?L.p(t,s):(L=ut(t),L.c(),L.m(y,$)):L&&(L.d(1),L=null),t[0].tax?H?H.p(t,s):(H=mt(t),H.c(),H.m(y,v)):H&&(H.d(1),H=null),1&s&&F!==(F=parseFloat(t[0].grand_total).toFixed(2)+"")&&E(C,F),t[0].payment?G?G.p(t,s):(G=pt(t),G.c(),G.m(y,D)):G&&(G.d(1),G=null),t[0].notes?q?q.p(t,s):(q=ft(t),q.c(),q.m(y,null)):q&&(q.d(1),q=null)},d(t){t&&f(e),I&&I.d(),U.d(),R(Y,t),L&&L.d(),H&&H.d(),G&&G.d(),q&&q.d()}}}function xt(t){let e,n;const s=new P({props:{tools:t[1],style:t[4]}});return s.$on("selected",t[5]),{c(){e=u("div"),a(s.$$.fragment),m(e,"slot","toolbar")},m(t,a){p(t,e,a),o(s,e,null),n=!0},p(t,e){const n={};2&e&&(n.tools=t[1]),s.$set(n)},i(t){n||(r(s.$$.fragment,t),n=!0)},o(t){l(s.$$.fragment,t),n=!1},d(t){t&&f(e),i(s)}}}function ht(t){let e,n,s;return{c(){e=g(),n=g(),s=g()},m(t,a){p(t,e,a),p(t,n,a),p(t,s,a)},p:v,i:v,o:v,d(t){t&&f(e),t&&f(n),t&&f(s)}}}function yt(t){let e;const n=new s({props:{style:t[6],$$slots:{default:[ht],toolbar:[xt],content:[gt],title:[st],loader:[nt]},$$scope:{ctx:t}}});return{c(){a(n.$$.fragment)},m(t,s){o(n,t,s),e=!0},p(t,[e]){const s={};16777231&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function $t(t,e,n){return t.replace(new RegExp(e,"g"),n)}function vt(t){return $t($t(t,", ",","),",",", ")}function bt(t){if(!t)return"";let e=t.match(/.{3}|.{1,2}/g),n="";return e.forEach((t,e)=>{n+=t+(e<2?"<span class='text-gray-600 px-1'>-</span>":"")}),n}function wt(t){let e=1==t.mode?"+ ":2==t.mode?"- ":"",n=3==t.mode?"% ":"",s=parseFloat(t.amount),a=s>0?` ${e}${s.toFixed(2)}${n}`:"";return`${t.name}${a}`}function _t(t,e,n){let s,a,o,r;c(t,d,t=>n(11,s=t)),c(t,w,t=>n(12,a=t)),c(t,_,t=>n(13,o=t));let{order:l={}}=e,i=!1,u=[{name:"Order Link",icon:"paper-plane",function:"link"},{name:"Close",icon:"close-circle",function:"pop_modal"}],m=!1;s.settings&&s.settings.delivery_token&&(u=l.delivery?[{name:"Track Delivery",icon:"cube",function:"track"},...u]:[{name:"Request Delivery",icon:"cube",function:"deliver"},...u]),z.extend(W),m=!0,T(M("/guest/invoice"),{order_id:l.invoice_id},"GET").then(t=>{n(2,m=!1),n(0,l={...l,...t})});let p=C(l.status);c(t,p,t=>n(3,r=t)),p.subscribe(t=>{i?(n(0,l.status=t,l),n(2,m=!0),T(M("/orders"),{_id:l._id,status:t,sub:o.fire_id},"PUT").then(t=>{n(2,m=!1),S(w,a={order:l})})):i=!0});let f=s.settings.statuses.map((t,e)=>({name:t,value:e})).slice(2);return t.$set=t=>{"order"in t&&n(0,l=t.order)},[l,u,m,r,{container:"justify-end"},function(t){"pop_modal"==t.detail.function&&$(),"link"==t.detail.function&&window.open(`https://pay.getorders.app/?i=${l.invoice_id}`,"_blank"),"track"==t.detail.function&&window.open(`https://www.tracking.my/matdespatch/${l.delivery.tracking_no}`,"_blank"),"deliver"==t.detail.function&&s.settings.delivery_token&&(n(2,m=!0),T(M("/deliver"),{order_id:l.invoice_id}).then(t=>{t._id?(n(0,l.delivery=t,l),S(w,a={order:l}),$()):alert("Delivery request failed. Despatch might be busy, try again."),n(2,m=!1)}))},{content:"overflow-y-scroll scrolling-touch"},{container:"m-auto table"},p,f,i,s,a,o,function(t){r=t,p.set(r)}]}class Tt extends t{constructor(t){super(),e(this,t,_t,yt,n,{order:0})}}function Mt(t){let e;const n=new j({props:{$$slots:{message:[Ct]},$$scope:{ctx:t}}});return{c(){a(n.$$.fragment)},m(t,s){o(n,t,s),e=!0},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function Ct(t){let e;return{c(){e=u("div"),e.textContent="Extracting data..",m(e,"slot","message")},m(t,n){p(t,e,n)},d(t){t&&f(e)}}}function kt(t){let e,n,s=t[3]&&Mt(t);return{c(){e=u("div"),s&&s.c(),m(e,"slot","loader")},m(t,a){p(t,e,a),s&&s.m(e,null),n=!0},p(t,n){t[3]?s?r(s,1):(s=Mt(t),s.c(),r(s,1),s.m(e,null)):s&&(k(),l(s,1,1,()=>{s=null}),D())},i(t){n||(r(s),n=!0)},o(t){l(s),n=!1},d(t){t&&f(e),s&&s.d()}}}function Dt(t){let e;return{c(){e=u("div"),e.textContent="Export Orders",m(e,"slot","title"),m(e,"class","font-semibold text-xl text-gray-600 pb-3")},m(t,n){p(t,e,n)},d(t){t&&f(e)}}}function Nt(t){let e,n,s,c,d,v,b,w,_,T,M,C,k,D,I,R,S,j,U,P,L,H,z,G,q,B,J,K,Q=t[1].format("ddd D/M/YY")+"";function W(e){t[12].call(null,e)}let Z={style:t[4],label:"",segments:[{name:"Default",value:""},{name:"Zepto",value:"zepto"},{name:"Mr Speedy",value:"speedy"}]};void 0!==t[2]&&(Z.value=t[2]);const V=new Y({props:Z});function X(e){t[13].call(null,e)}N.push(()=>O(V,"value",W));let tt={style:t[4],label:"",segments:[{name:"Paid",value:"paid"},{name:"All",value:""}]};void 0!==t[0].type&&(tt.value=t[0].type);const et=new Y({props:tt});return N.push(()=>O(et,"value",X)),{c(){e=u("div"),n=u("p"),n.textContent="Select a day to export from",s=g(),c=u("div"),d=u("button"),d.innerHTML='<i class="far fa-arrow-alt-circle-left"></i>',v=g(),b=u("div"),w=A(Q),_=g(),T=u("button"),T.innerHTML='<i class="far fa-arrow-alt-circle-right"></i>',M=g(),C=u("p"),C.textContent="Select format to export to",k=g(),D=u("div"),a(V.$$.fragment),R=g(),S=u("p"),S.textContent="Export Options",j=g(),U=u("div"),a(et.$$.fragment),L=g(),H=u("div"),z=u("button"),z.textContent="Export Now",G=g(),q=u("div"),B=u("button"),B.textContent="Cancel",m(n,"class","text-gray-800 mb-2 text-center"),m(b,"class","flex-grow self-center text-center"),m(c,"class","flex text-lg font-semibold m-2"),m(C,"class","text-gray-800 my-2 text-center"),m(D,"class","flex justify-center"),m(S,"class","text-gray-800 my-2 text-center"),m(U,"class","flex justify-center"),m(z,"class","p-2 w-1/2 shadow-md bg-theme text-white rounded-lg capitalize font-bold h-full shadow-md"),m(H,"class","flex justify-center mt-2"),m(B,"class","p-2 w-1/2 shadow-md bg-gray-400 text-white rounded-lg capitalize font-bold h-full shadow-md"),m(q,"class","flex justify-center my-2"),m(e,"slot","content"),m(e,"class","p-2")},m(a,r,l){p(a,e,r),x(e,n),x(e,s),x(e,c),x(c,d),x(c,v),x(c,b),x(b,w),x(c,_),x(c,T),x(e,M),x(e,C),x(e,k),x(e,D),o(V,D,null),x(e,R),x(e,S),x(e,j),x(e,U),o(et,U,null),x(e,L),x(e,H),x(H,z),x(e,G),x(e,q),x(q,B),J=!0,l&&h(K),K=[y(d,"click",t[10]),y(T,"click",t[11]),y(z,"click",t[6]),y(B,"click",$)]},p(t,e){(!J||2&e)&&Q!==(Q=t[1].format("ddd D/M/YY")+"")&&E(w,Q);const n={};!I&&4&e&&(I=!0,n.value=t[2],F(()=>I=!1)),V.$set(n);const s={};!P&&1&e&&(P=!0,s.value=t[0].type,F(()=>P=!1)),et.$set(s)},i(t){J||(r(V.$$.fragment,t),r(et.$$.fragment,t),J=!0)},o(t){l(V.$$.fragment,t),l(et.$$.fragment,t),J=!1},d(t){t&&f(e),i(V),i(et),h(K)}}}function Ot(t){let e,n;return{c(){e=g(),n=g()},m(t,s){p(t,e,s),p(t,n,s)},p:v,i:v,o:v,d(t){t&&f(e),t&&f(n)}}}function Ft(t){let e,n,c,d;const h=new s({props:{$$slots:{default:[Ot],content:[Nt],title:[Dt],loader:[kt]},$$scope:{ctx:t}}});return{c(){e=u("script"),c=g(),a(h.$$.fragment),e.src!==(n="https://unpkg.com/papaparse@latest/papaparse.min.js")&&m(e,"src","https://unpkg.com/papaparse@latest/papaparse.min.js")},m(t,n){x(document.head,e),p(t,c,n),o(h,t,n),d=!0},p(t,[e]){const n={};16399&e&&(n.$$scope={dirty:e,ctx:t}),h.$set(n)},i(t){d||(r(h.$$.fragment,t),d=!0)},o(t){l(h.$$.fragment,t),d=!1},d(t){f(e),t&&f(c),i(h,t)}}}function At(t,e,n){let s,a;c(t,_,t=>n(7,s=t)),c(t,d,t=>n(8,a=t));let o={type:"paid"},r=z(),l="",i=!1;function u(t){n(1,r=r.add(t,"day"))}function m(t){let e=[];switch(l){case"":e=t.map(t=>({order_date:z(t.createdAt).format("MM/DD hh:mm"),name:t.guest.name,phone:t.guest.phone,address:`${t.guest.address||""} ${t.guest.address2||""}`,postcode:t.guest.postcode,notes:t.notes,isPickUp:t.guest.address?"N":"Y",amount:t.payment?t.payment.amount.toFixed(2):"10.00",paid:t.payment?z(t.payment.paidAt||t.createdAt).format("MM/DD hh:mm"):"",invoice:`https://pay.getorders.app/?i=${t.invoice_id}`}));break;case"speedy":e=t.map(t=>({"Address(mandatory field)":`${t.guest.address||""} ${t.guest.address2||""}`,"Contact person":t.guest.name,"Recipient's phone (mandatory field)":t.guest.phone,"Parcel contents(mandatory field)":"FOOD","Weight in kg(mandatory field)":.5,"Internal order number":t.invoice_id,"Comment for courier":t.notes||"","Apartment / office number":"","Need to return on pickup point":"",'Time "since" on point':z(t.createdAt).format("DD.MM.YYYY hh:mm:ss"),'Time "till" on point':z(t.createdAt).add(1,"hour").format("DD.MM.YYYY hh:mm:ss"),"COD amount":"0","Buyout amount":"0","Do not fill anything in this column":"","Declared value":t.payment?t.payment.amount.toFixed(2):"10.00","Courier needs motorbox":"x"}));break;case"zepto":e=t.map(t=>({UNIT_NO:"",ADDRESS:`${t.guest.address||""} ${t.guest.address2||""}`,CONTACT_PERSON:t.guest.name,CONTACT_NUMBER:t.guest.phone,EMAIL:"",INSTRUCTION_NOTE:t.notes||""})),e=[{UNIT_NO:"",ADDRESS:`${a.settings.address||""} ${a.settings.address2||""} ${a.settings.postcode||""}`,CONTACT_PERSON:a.settings.name,CONTACT_NUMBER:a.settings.phone,EMAIL:"",INSTRUCTION_NOTE:"PICKUP HERE"},...e]}U(Papa.unparse(e),"orders.csv","text/csv;encoding:utf-8")}return[o,r,l,i,{container:"p-2 mb-3",label:"w-32"},u,function(){n(3,i=!0),T(M("/orders"),{sub:s.fire_id,order_type:o.type,from:r.startOf("day").toJSON(),to:r.endOf("day").toJSON()},"GET").then(t=>{n(3,i=!1),m(t.orders)})},s,a,m,()=>u(-1),()=>u(1),function(t){l=t,n(2,l)},function(t){o.type=t,n(0,o)}]}class Et extends t{constructor(t){super(),e(this,t,At,Ft,n,{})}}export{Q as A,Tt as I,Et as O};
//# sourceMappingURL=OrdersExport-2169d1de.js.map
