import{S as t,i as e,s as n,M as s,j as r,m as o,k as a,o as l,p as i,q as c,z as d,e as u,b as m,c as p,h as f,a as g,d as h,w as x,l as y,Q as v,n as $,ae as b,W as w,D as M,E as _,af as k,F as D,r as Y,u as A,G as j,H as F,v as T,t as C,g as q,x as I,y as R,L as P,ag as U,R as E,C as z,a1 as H}from"./App-a0a8461c.js";import{T as N}from"./UIToolbar-83f55ec3.js";import{U as L}from"./UIItem-790861f3.js";import{S as O}from"./UISegmented-8d5fa24d.js";import{c as S,a as G,d as B}from"./dayjs.min-d290c2ff.js";function W(t){let e;return{c(){e=u("div"),e.textContent="Activate GetPayments",m(e,"slot","title"),m(e,"class","font-semibold text-xl text-gray-600 pb-3")},m(t,n){p(t,e,n)},d(t){t&&f(e)}}}function K(t){let e,n,s,r,o,a,l,i,c;return{c(){e=u("div"),n=u("p"),n.innerHTML="\n            In order to accept payments, your account has to first activate <b>GetPayments</b>.<br>\n            Tap here to contact our support to activate now.\n        ",s=g(),r=u("div"),o=u("button"),o.textContent="Contact Support",a=g(),l=u("div"),i=u("button"),i.textContent="Cancel",m(n,"class","text-gray-800 mb-6 text-center"),m(o,"class","p-2 w-1/2 shadow-md bg-theme text-white rounded-lg capitalize font-bold h-full shadow-md"),m(r,"class","flex justify-center mt-2"),m(i,"class","p-2 w-1/2 shadow-md bg-gray-400 text-white rounded-lg capitalize font-bold h-full shadow-md"),m(l,"class","flex justify-center mt-2"),m(e,"slot","content"),m(e,"class","h-64 p-2")},m(d,u,m){p(d,e,u),h(e,n),h(e,s),h(e,r),h(r,o),h(e,a),h(e,l),h(l,i),m&&x(c),c=[y(o,"click",t[0]),y(i,"click",v)]},p:$,d(t){t&&f(e),x(c)}}}function Q(t){let e;return{c(){e=g()},m(t,n){p(t,e,n)},p:$,d(t){t&&f(e)}}}function J(t){let e;const n=new s({props:{$$slots:{default:[Q],content:[K],title:[W]},$$scope:{ctx:t}}});return{c(){r(n.$$.fragment)},m(t,s){o(n,t,s),e=!0},p(t,[e]){const s={};4&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(a(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function V(t,e,n){let s;return c(t,d,t=>n(1,s=t)),[function(){b(`Hello, I would like to activate payments for my GetOrders account.\n üëâüèª My ID : ${s.settings.fire_id}`)}]}class X extends t{constructor(t){super(),e(this,t,V,J,n,{})}}var Z=S((function(t,e){t.exports=function(t,e,n){var s=e.prototype;n.en.relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};var r=function(t,e,s,r){for(var o,a,l,i=s.$locale().relativeTime,c=[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],d=c.length,u=0;u<d;u+=1){var m=c[u];m.d&&(o=r?n(t).diff(s,m.d,!0):s.diff(t,m.d,!0));var p=Math.round(Math.abs(o));if(l=o>0,p<=m.r||!m.r){1===p&&u>0&&(m=c[u-1]);var f=i[m.l];a="string"==typeof f?f.replace("%d",p):f(p,e,m.l,l);break}}return e?a:(l?i.future:i.past).replace("%s",a)};s.to=function(t,e){return r(t,e,this,!0)},s.from=function(t,e){return r(t,e,this)};var o=function(t){return t.$u?n.utc():n()};s.toNow=function(t){return this.to(o(this),t)},s.fromNow=function(t){return this.from(o(this),t)}}}));function tt(t,e,n){const s=t.slice();return s[16]=e[n],s}function et(t,e,n){const s=t.slice();return s[19]=e[n],s}function nt(t,e,n){const s=t.slice();return s[13]=e[n],s[15]=n,s}function st(t){let e;const n=new P({props:{$$slots:{message:[rt]},$$scope:{ctx:t}}});return{c(){r(n.$$.fragment)},m(t,s){o(n,t,s),e=!0},i(t){e||(a(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function rt(t){let e;return{c(){e=u("div"),e.textContent="One Moment Please..",m(e,"slot","message")},m(t,n){p(t,e,n)},d(t){t&&f(e)}}}function ot(t){let e,n,s=t[2]&&st(t);return{c(){e=u("div"),s&&s.c(),m(e,"slot","loader")},m(t,r){p(t,e,r),s&&s.m(e,null),n=!0},p(t,n){t[2]?s?a(s,1):(s=st(t),s.c(),a(s,1),s.m(e,null)):s&&(Y(),l(s,1,1,()=>{s=null}),A())},i(t){n||(a(s),n=!0)},o(t){l(s),n=!1},d(t){t&&f(e),s&&s.d()}}}function at(t){let e,n,s;function c(e){t[12].call(null,e)}let d={style:t[7],segments:t[9]};void 0!==t[3]&&(d.value=t[3]);const g=new O({props:d});return j.push(()=>F(g,"value",c)),{c(){e=u("div"),r(g.$$.fragment),m(e,"slot","title"),m(e,"class","font-semibold text-xl text-gray-600")},m(t,n){p(t,e,n),o(g,e,null),s=!0},p(t,e){const s={};!n&&8&e&&(n=!0,s.value=t[3],T(()=>n=!1)),g.$set(s)},i(t){s||(a(g.$$.fragment,t),s=!0)},o(t){l(g.$$.fragment,t),s=!1},d(t){t&&f(e),i(g)}}}function lt(t){let e,n,s,r=Mt(t[0].guest.phone)+"";return{c(){e=u("p"),n=u("a"),m(n,"href",s="tel:"+t[0].guest.phone),m(e,"class","leading-tight text-lg text-gray-700 mb-2")},m(t,s){p(t,e,s),h(e,n),n.innerHTML=r},p(t,e){1&e&&r!==(r=Mt(t[0].guest.phone)+"")&&(n.innerHTML=r),1&e&&s!==(s="tel:"+t[0].guest.phone)&&m(n,"href",s)},d(t){t&&f(e)}}}function it(t){let e;return{c(){e=u("p"),e.textContent="PICKUP ORDER",m(e,"class","text-sm text-theme uppercase")},m(t,n){p(t,e,n)},p:$,d(t){t&&f(e)}}}function ct(t){let e,n,s,r,o=wt(t[0].guest.address)+"",a=wt(t[0].guest.address2)+"";return{c(){e=u("p"),n=C(o),s=g(),r=C(a),m(e,"class","text-sm text-theme uppercase")},m(t,o){p(t,e,o),h(e,n),h(e,s),h(e,r)},p(t,e){1&e&&o!==(o=wt(t[0].guest.address)+"")&&q(n,o),1&e&&a!==(a=wt(t[0].guest.address2)+"")&&q(r,a)},d(t){t&&f(e)}}}function dt(t){let e,n=t[13].variant,s=[];for(let e=0;e<n.length;e+=1)s[e]=ut(et(t,n,e));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=I()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);p(t,e,n)},p(t,r){if(1&r){let o;for(n=t[13].variant,o=0;o<n.length;o+=1){const a=et(t,n,o);s[o]?s[o].p(a,r):(s[o]=ut(a),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){R(s,t),t&&f(e)}}}function ut(t){let e,n,s,r=t[19].name+"";return{c(){e=u("p"),n=C(r),s=g(),m(e,"class","text-sm text-gray-700")},m(t,r){p(t,e,r),h(e,n),h(e,s)},p(t,e){1&e&&r!==(r=t[19].name+"")&&q(n,r)},d(t){t&&f(e)}}}function mt(t){let e,n,s,r=_t(t[16])+"";return{c(){e=u("p"),n=C(r),s=g(),m(e,"class","text-sm text-gray-700")},m(t,r){p(t,e,r),h(e,n),h(e,s)},p(t,e){1&e&&r!==(r=_t(t[16])+"")&&q(n,r)},d(t){t&&f(e)}}}function pt(t){let e,n,s,r,o,a,l,i,c,d,x,y,v,$,b,w=t[13].quantity+"",M=(t[13].name||"")+"",_=parseFloat(t[13].unit_price||0).toFixed(2)+"",k=t[13].variant&&dt(t),D=t[13].modifiers,Y=[];for(let e=0;e<D.length;e+=1)Y[e]=mt(tt(t,D,e));return{c(){e=u("div"),n=u("div"),s=u("span"),r=C(w),o=C("x"),a=g(),l=u("div"),i=u("p"),c=C(M),d=g(),k&&k.c(),x=g();for(let t=0;t<Y.length;t+=1)Y[t].c();y=g(),v=u("div"),$=C(_),m(s,"class","table-cell align-middle"),m(n,"class","flex-none w-10 h-10 text-center rounded-lg bg-gray-200 table text-sm text-gray-700"),m(i,"class","font-semibold"),m(l,"class","flex-grow px-2"),m(v,"class","flex-none w-20 text-right text-sm text-gray-700"),m(e,"class",b="flex "+(t[15]<t[0].cart.length-1?"border-b":"")+" mx-2 p-2 border-gray-200 list-item")},m(t,u){p(t,e,u),h(e,n),h(n,s),h(s,r),h(s,o),h(e,a),h(e,l),h(l,i),h(i,c),h(l,d),k&&k.m(l,null),h(l,x);for(let t=0;t<Y.length;t+=1)Y[t].m(l,null);h(e,y),h(e,v),h(v,$)},p(t,n){if(1&n&&w!==(w=t[13].quantity+"")&&q(r,w),1&n&&M!==(M=(t[13].name||"")+"")&&q(c,M),t[13].variant?k?k.p(t,n):(k=dt(t),k.c(),k.m(l,x)):k&&(k.d(1),k=null),1&n){let e;for(D=t[13].modifiers,e=0;e<D.length;e+=1){const s=tt(t,D,e);Y[e]?Y[e].p(s,n):(Y[e]=mt(s),Y[e].c(),Y[e].m(l,null))}for(;e<Y.length;e+=1)Y[e].d(1);Y.length=D.length}1&n&&_!==(_=parseFloat(t[13].unit_price||0).toFixed(2)+"")&&q($,_),1&n&&b!==(b="flex "+(t[15]<t[0].cart.length-1?"border-b":"")+" mx-2 p-2 border-gray-200 list-item")&&m(e,"class",b)},d(t){t&&f(e),k&&k.d(),R(Y,t)}}}function ft(t){let e,n,s,r,o,a,l,i=parseFloat(t[0].delivery_fees).toFixed(2)+"";return{c(){e=u("div"),n=u("p"),s=C("Delivery charges of "),r=u("b"),o=C("RM"),a=C(i),l=C(" applies for delivery."),m(n,"class","text-green-500"),m(e,"class","p-2 text-right text-sm")},m(t,i){p(t,e,i),h(e,n),h(n,s),h(n,r),h(r,o),h(r,a),h(n,l)},p(t,e){1&e&&i!==(i=parseFloat(t[0].delivery_fees).toFixed(2)+"")&&q(a,i)},d(t){t&&f(e)}}}function gt(t){let e,n,s,r,o,a,l,i,c=t[0].tax.value+"",d=parseFloat(t[0].tax.amount).toFixed(2)+"";return{c(){e=u("div"),n=u("p"),s=C("SST Tax ("),r=C(c),o=C("%) : "),a=u("b"),l=C("RM"),i=C(d),m(n,"class","text-green-500"),m(e,"class","p-2 text-right text-sm")},m(t,c){p(t,e,c),h(e,n),h(n,s),h(n,r),h(n,o),h(n,a),h(a,l),h(a,i)},p(t,e){1&e&&c!==(c=t[0].tax.value+"")&&q(r,c),1&e&&d!==(d=parseFloat(t[0].tax.amount).toFixed(2)+"")&&q(i,d)},d(t){t&&f(e)}}}function ht(t){let e,n,s=t[0].status>4?"Thanks! This invoice has been paid.":"Unpaid Invoice";return{c(){e=u("p"),n=C(s),m(e,"class","text-center text-theme font-semibold")},m(t,s){p(t,e,s),h(e,n)},p(t,e){1&e&&s!==(s=t[0].status>4?"Thanks! This invoice has been paid.":"Unpaid Invoice")&&q(n,s)},d(t){t&&f(e)}}}function xt(t){let e,n,s,r,o,a,l,i,c,d,x,y,v,$,b,w,M,_,k,D,Y,A=t[0].guest.name+"",j=B().to(B(t[0].createdAt))+"",F=parseFloat(t[0].grand_total).toFixed(2)+"",T=t[0].guest.phone&&lt(t);function I(t,e){return t[0].guest.address&&2==t[0].method?ct:it}let P=I(t),U=P(t),E=t[0].cart,z=[];for(let e=0;e<E.length;e+=1)z[e]=pt(nt(t,E,e));let H=t[0].delivery_fees&&2==t[0].method&&ft(t),N=t[0].tax&&gt(t),L=t[0].payment&&ht(t);return{c(){e=u("div"),n=u("div"),s=u("p"),r=C(A),o=g(),T&&T.c(),a=g(),U.c(),l=g(),i=u("div"),c=C(j),d=g();for(let t=0;t<z.length;t+=1)z[t].c();x=g(),y=u("div"),H&&H.c(),v=g(),N&&N.c(),$=g(),b=u("div"),w=u("div"),w.textContent="Grand Total",M=g(),_=u("div"),k=C("RM"),D=C(F),Y=g(),L&&L.c(),m(s,"class","leading-tight font-semibold"),m(n,"class","m-2"),m(i,"class","rounded-lg bg-teal-400 text-white text-sm font-semibold m-2 p-2"),m(w,"class","flex-grow text-left"),m(_,"class","flex-grow text-right ml-2"),m(b,"class","flex px-2 mb-2 font-bold"),m(y,"class","flex-none w-full bg-gray-100 shadow-xs p-3 text-center"),m(e,"slot","content"),m(e,"class","p-2")},m(t,u){p(t,e,u),h(e,n),h(n,s),h(s,r),h(n,o),T&&T.m(n,null),h(n,a),U.m(n,null),h(e,l),h(e,i),h(i,c),h(e,d);for(let t=0;t<z.length;t+=1)z[t].m(e,null);h(e,x),h(e,y),H&&H.m(y,null),h(y,v),N&&N.m(y,null),h(y,$),h(y,b),h(b,w),h(b,M),h(b,_),h(_,k),h(_,D),h(y,Y),L&&L.m(y,null)},p(t,s){if(1&s&&A!==(A=t[0].guest.name+"")&&q(r,A),t[0].guest.phone?T?T.p(t,s):(T=lt(t),T.c(),T.m(n,a)):T&&(T.d(1),T=null),P===(P=I(t))&&U?U.p(t,s):(U.d(1),U=P(t),U&&(U.c(),U.m(n,null))),1&s&&j!==(j=B().to(B(t[0].createdAt))+"")&&q(c,j),1&s){let n;for(E=t[0].cart,n=0;n<E.length;n+=1){const r=nt(t,E,n);z[n]?z[n].p(r,s):(z[n]=pt(r),z[n].c(),z[n].m(e,x))}for(;n<z.length;n+=1)z[n].d(1);z.length=E.length}t[0].delivery_fees&&2==t[0].method?H?H.p(t,s):(H=ft(t),H.c(),H.m(y,v)):H&&(H.d(1),H=null),t[0].tax?N?N.p(t,s):(N=gt(t),N.c(),N.m(y,$)):N&&(N.d(1),N=null),1&s&&F!==(F=parseFloat(t[0].grand_total).toFixed(2)+"")&&q(D,F),t[0].payment?L?L.p(t,s):(L=ht(t),L.c(),L.m(y,null)):L&&(L.d(1),L=null)},d(t){t&&f(e),T&&T.d(),U.d(),R(z,t),H&&H.d(),N&&N.d(),L&&L.d()}}}function yt(t){let e,n;const s=new N({props:{tools:t[1],style:t[4]}});return s.$on("selected",t[5]),{c(){e=u("div"),r(s.$$.fragment),m(e,"slot","toolbar")},m(t,r){p(t,e,r),o(s,e,null),n=!0},p(t,e){const n={};2&e&&(n.tools=t[1]),s.$set(n)},i(t){n||(a(s.$$.fragment,t),n=!0)},o(t){l(s.$$.fragment,t),n=!1},d(t){t&&f(e),i(s)}}}function vt(t){let e,n,s;return{c(){e=g(),n=g(),s=g()},m(t,r){p(t,e,r),p(t,n,r),p(t,s,r)},p:$,i:$,o:$,d(t){t&&f(e),t&&f(n),t&&f(s)}}}function $t(t){let e;const n=new s({props:{style:t[6],$$slots:{default:[vt],toolbar:[yt],content:[xt],title:[at],loader:[ot]},$$scope:{ctx:t}}});return{c(){r(n.$$.fragment)},m(t,s){o(n,t,s),e=!0},p(t,[e]){const s={};4194319&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(a(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function bt(t,e,n){return t.replace(new RegExp(e,"g"),n)}function wt(t){return bt(bt(t,", ",","),",",", ")}function Mt(t){if(!t)return"";let e=t.match(/.{3}|.{1,2}/g),n="";return e.forEach((t,e)=>{n+=t+(e<2?"<span class='text-gray-600 px-1'>-</span>":"")}),n}function _t(t){let e=1==t.mode?"+ ":2==t.mode?"- ":"",n=3==t.mode?"% ":"",s=parseFloat(t.amount),r=s>0?` ${e}${s.toFixed(2)}${n}`:"";return`${t.name}${r}`}function kt(t,e,n){let s,r,o;c(t,d,t=>n(10,s=t)),c(t,w,t=>n(11,r=t));let{order:a={}}=e,l=[{name:"Order Link",icon:"paper-plane",function:"link"},{name:"Close",icon:"close-circle",function:"pop_modal"}],i=!1;s.settings&&s.settings.delivery_token&&(l=a.delivery?[{name:"Track Delivery",icon:"cube",function:"track"},...l]:[{name:"Request Delivery",icon:"cube",function:"deliver"},...l]),B.extend(Z),i=!0,M(_("/guest/invoice"),{order_id:a.invoice_id},"GET").then(t=>{n(2,i=!1),n(0,a={...a,...t})});let u=k(a.status);c(t,u,t=>n(3,o=t)),u.subscribe(t=>{n(0,a.status=t,a),n(2,i=!0),M(_("/orders"),{_id:a._id,status:t},"PUT").then(t=>{n(2,i=!1),D(w,r={order:a})})});let m=s.settings.statuses.map((t,e)=>({name:t,value:e})).slice(2);return t.$set=t=>{"order"in t&&n(0,a=t.order)},[a,l,i,o,{container:"justify-end"},function(t){"pop_modal"==t.detail.function&&v(),"link"==t.detail.function&&window.open(`https://pay.getorders.app/?i=${a.invoice_id}`,"_blank"),"track"==t.detail.function&&window.open(`https://www.tracking.my/matdespatch/${a.delivery.tracking_no}`,"_blank"),"deliver"==t.detail.function&&s.settings.delivery_token&&(n(2,i=!0),M(_("/deliver"),{order_id:a.invoice_id}).then(t=>{t._id?(n(0,a.delivery=t,a),D(w,r={order:a}),v()):alert("Delivery request failed. Despatch might be busy, try again."),n(2,i=!1)}))},{content:"overflow-y-scroll scrolling-touch"},{container:"m-auto table"},u,m,s,r,function(t){o=t,u.set(o)}]}class Dt extends t{constructor(t){super(),e(this,t,kt,$t,n,{order:0})}}const{document:Yt}=U;function At(t,e,n){const s=t.slice();return s[22]=e[n],s}function jt(t,e,n){const s=t.slice();return s[19]=e[n],s}function Ft(t){let e,n,s,r=t[3].settings.statuses[t[22].status]+"";return{c(){e=u("span"),n=C(r),m(e,"class",s="ml-2 rounded-lg "+t[10][t[22].status]+" text-white text-sm px-2 capitalize svelte-qjn5fh")},m(t,s){p(t,e,s),h(e,n)},p(t,o){9&o&&r!==(r=t[3].settings.statuses[t[22].status]+"")&&q(n,r),1&o&&s!==(s="ml-2 rounded-lg "+t[10][t[22].status]+" text-white text-sm px-2 capitalize svelte-qjn5fh")&&m(e,"class",s)},d(t){t&&f(e)}}}function Tt(t){let e;return{c(){e=C("PICKUP ORDER")},m(t,n){p(t,e,n)},p:$,d(t){t&&f(e)}}}function Ct(t){let e,n,s,r=t[22].guest.address+"",o=t[22].guest.address2+"";return{c(){e=C(r),n=g(),s=C(o)},m(t,r){p(t,e,r),p(t,n,r),p(t,s,r)},p(t,n){1&n&&r!==(r=t[22].guest.address+"")&&q(e,r),1&n&&o!==(o=t[22].guest.address2+"")&&q(s,o)},d(t){t&&f(e),t&&f(n),t&&f(s)}}}function qt(t){let e,n,s,r,o=B(t[22].payment.paidAt).format("DD/MM/YYYY h:mmA")+"";return{c(){e=u("p"),n=u("i"),s=C(" Paid on "),r=C(o),m(n,"class","icon ion-md-checkmark-circle pr-1"),m(e,"class","text-sm text-green-500 font-semibold")},m(t,o){p(t,e,o),h(e,n),h(e,s),h(e,r)},p(t,e){1&e&&o!==(o=B(t[22].payment.paidAt).format("DD/MM/YYYY h:mmA")+"")&&q(r,o)},d(t){t&&f(e)}}}function It(t){let e,n,s,r,o=B(t[22].delivery.createdAt).format("DD/MM/YYYY h:mmA")+"";return{c(){e=u("p"),n=u("i"),s=C(" Delivery requested on "),r=C(o),m(n,"class","icon ion-md-cube pr-1"),m(e,"class","text-sm text-orange-500 font-semibold")},m(t,o){p(t,e,o),h(e,n),h(e,s),h(e,r)},p(t,e){1&e&&o!==(o=B(t[22].delivery.createdAt).format("DD/MM/YYYY h:mmA")+"")&&q(r,o)},d(t){t&&f(e)}}}function Rt(t){let e,n;function s(...e){return t[16](t[22],...e)}return{c(){e=u("button"),e.innerHTML='<i class="icon ion-md-checkmark-circle-outline"></i>',m(e,"class","action bg-theme svelte-qjn5fh")},m(t,r,o){p(t,e,r),o&&n(),n=y(e,"click",s)},p(e,n){t=e},d(t){t&&f(e),n()}}}function Pt(t){let e,n,s,r,o,a,l,i,c,d,v,$,b,w,M,_,k,D,Y,A=B(t[22].createdAt).format("h:mmA")+"",j=t[22].guest.name+"",F=t[22].guest.phone+"",T=t[3].settings&&Ft(t);function I(t,e){return t[22].guest.address?Ct:Tt}let R=I(t),P=R(t),U=t[22].payment&&t[22].payment.paidAt&&qt(t),E=t[22].delivery&&It(t);function z(...e){return t[15](t[22],...e)}let H=!t[22].payment&&Rt(t);function N(...e){return t[17](t[22],...e)}return{c(){e=u("div"),n=u("p"),s=C(A),r=g(),T&&T.c(),o=g(),a=u("p"),l=C(j),i=g(),c=u("p"),d=C(F),v=g(),$=u("p"),P.c(),b=g(),U&&U.c(),w=g(),E&&E.c(),_=g(),H&&H.c(),k=g(),D=u("button"),D.innerHTML='<i class="icon ion-logo-whatsapp"></i>',m(n,"class","text-theme font-semibold"),m(a,"class","font-semibold leading-tight"),m(c,"class","leading-tight text-gray-600"),m($,"class","text-sm"),m(e,"class",M="flex-grow p-2 cursor-pointer "+(7==t[22].status||4==t[22].status?"opacity-25":"")),m(D,"class","action bg-theme svelte-qjn5fh")},m(t,u,m){p(t,e,u),h(e,n),h(n,s),h(n,r),T&&T.m(n,null),h(e,o),h(e,a),h(a,l),h(e,i),h(e,c),h(c,d),h(e,v),h(e,$),P.m($,null),h(e,b),U&&U.m(e,null),h(e,w),E&&E.m(e,null),p(t,_,u),H&&H.m(t,u),p(t,k,u),p(t,D,u),m&&x(Y),Y=[y(e,"click",z),y(D,"click",N)]},p(r,o){t=r,1&o&&A!==(A=B(t[22].createdAt).format("h:mmA")+"")&&q(s,A),t[3].settings?T?T.p(t,o):(T=Ft(t),T.c(),T.m(n,null)):T&&(T.d(1),T=null),1&o&&j!==(j=t[22].guest.name+"")&&q(l,j),1&o&&F!==(F=t[22].guest.phone+"")&&q(d,F),R===(R=I(t))&&P?P.p(t,o):(P.d(1),P=R(t),P&&(P.c(),P.m($,null))),t[22].payment&&t[22].payment.paidAt?U?U.p(t,o):(U=qt(t),U.c(),U.m(e,w)):U&&(U.d(1),U=null),t[22].delivery?E?E.p(t,o):(E=It(t),E.c(),E.m(e,null)):E&&(E.d(1),E=null),1&o&&M!==(M="flex-grow p-2 cursor-pointer "+(7==t[22].status||4==t[22].status?"opacity-25":""))&&m(e,"class",M),t[22].payment?H&&(H.d(1),H=null):H?H.p(t,o):(H=Rt(t),H.c(),H.m(k.parentNode,k))},d(t){t&&f(e),T&&T.d(),P.d(),U&&U.d(),E&&E.d(),t&&f(_),H&&H.d(t),t&&f(k),t&&f(D),x(Y)}}}function Ut(t){let e;const n=new L({props:{$$slots:{default:[Pt]},$$scope:{ctx:t}}});return{c(){r(n.$$.fragment)},m(t,s){o(n,t,s),e=!0},p(t,e){const s={};33554457&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){e||(a(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){i(n,t)}}}function Et(t){let e,n,s,r,o,i=B(t[19]).format("ddd D/M/YY")+"",c=t[0][t[19]],d=[];for(let e=0;e<c.length;e+=1)d[e]=Ut(At(t,c,e));const x=t=>l(d[t],1,1,()=>{d[t]=null});return{c(){e=u("div"),n=C(i),s=g();for(let t=0;t<d.length;t+=1)d[t].c();r=I(),m(e,"class","rounded-lg bg-theme text-white text-lg font-semibold m-2 p-2")},m(t,a){p(t,e,a),h(e,n),p(t,s,a);for(let e=0;e<d.length;e+=1)d[e].m(t,a);p(t,r,a),o=!0},p(t,e){if((!o||1&e)&&i!==(i=B(t[19]).format("ddd D/M/YY")+"")&&q(n,i),1817&e){let n;for(c=t[0][t[19]],n=0;n<c.length;n+=1){const s=At(t,c,n);d[n]?(d[n].p(s,e),a(d[n],1)):(d[n]=Ut(s),d[n].c(),a(d[n],1),d[n].m(r.parentNode,r))}for(Y(),n=c.length;n<d.length;n+=1)x(n);A()}},i(t){if(!o){for(let t=0;t<c.length;t+=1)a(d[t]);o=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)l(d[t]);o=!1},d(t){t&&f(e),t&&f(s),R(d,t),t&&f(r)}}}function zt(t){let e,n,s;return{c(){e=u("div"),n=u("button"),n.textContent="Show More",m(n,"class","p-2 w-1/2 shadow-md bg-theme text-white rounded-lg capitalize font-bold h-full shadow-md"),m(e,"class","flex justify-center mt-2")},m(r,o,a){p(r,e,o),h(e,n),a&&s(),s=y(n,"click",t[18])},p:$,d(t){t&&f(e),s()}}}function Ht(t){let e,n,s,c,d,x,y;const v=new N({props:{class:"border-b border-gray-300",tools:t[5]}});v.$on("selected",t[6]);let $=Object.keys(t[0]),b=[];for(let e=0;e<$.length;e+=1)b[e]=Et(jt(t,$,e));const w=t=>l(b[t],1,1,()=>{b[t]=null});let M=t[2]&&zt(t);return{c(){e=u("script"),s=g(),r(v.$$.fragment),c=g();for(let t=0;t<b.length;t+=1)b[t].c();d=g(),M&&M.c(),x=I(),e.src!==(n="https://unpkg.com/papaparse@latest/papaparse.min.js")&&m(e,"src","https://unpkg.com/papaparse@latest/papaparse.min.js")},m(t,n){h(Yt.head,e),p(t,s,n),o(v,t,n),p(t,c,n);for(let e=0;e<b.length;e+=1)b[e].m(t,n);p(t,d,n),M&&M.m(t,n),p(t,x,n),y=!0},p(t,[e]){if(1817&e){let n;for($=Object.keys(t[0]),n=0;n<$.length;n+=1){const s=jt(t,$,n);b[n]?(b[n].p(s,e),a(b[n],1)):(b[n]=Et(s),b[n].c(),a(b[n],1),b[n].m(d.parentNode,d))}for(Y(),n=$.length;n<b.length;n+=1)w(n);A()}t[2]?M?M.p(t,e):(M=zt(t),M.c(),M.m(x.parentNode,x)):M&&(M.d(1),M=null)},i(t){if(!y){a(v.$$.fragment,t);for(let t=0;t<$.length;t+=1)a(b[t]);y=!0}},o(t){l(v.$$.fragment,t),b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)l(b[t]);y=!1},d(t){f(e),t&&f(s),i(v,t),t&&f(c),R(b,t),t&&f(d),M&&M.d(t),t&&f(x)}}}function Nt(t,e,n){let s,r,o,a;c(t,w,t=>n(12,s=t)),c(t,E,t=>n(13,r=t)),c(t,d,t=>n(3,o=t)),c(t,z,t=>n(4,a=t));let l={},i=0,u=!0,m=[];function p(t){0==t&&n(2,u=!0),n(1,i=t),D(E,r=!0),M(_(`/orders/${i}`)).then(t=>{D(E,r=!1),0==t.orders.length?n(2,u=!1):(m=0==i?t.orders:[...m,...t.orders],f())})}function f(){let t={};m.forEach(e=>{let n=B(e.createdAt).format("YYYY-MM-DD");t[n]=[...t[n]||[],e]}),n(0,l=t)}function g(t){o.settings.billplz_token?(D(E,r=!0),M(_("/payment/billplz"),{order_id:t.invoice_id}).then(e=>{m=m.map(n=>(n.invoice_id==t.invoice_id&&(n.payment={bill_id:e.bill_id,url:e.url}),n)),f(),D(E,r=!1)})):D(z,a=[...a,{view:X}])}function h(t){let e=t.guest.phone;e.startsWith("01")&&(e="6"+e);let n=`https://api.whatsapp.com/send?phone=${e}&text=`,s="";t.payment&&(s=`Hey there! We *(${o.settings.name})* have received your order, tap here to pay now.`,s=`${s} üëâüèª https://pay.getorders.app/?i=${t.invoice_id}\n\n`);let r=encodeURIComponent(s);document.location.href=`${n}${r}`}p(0),w.subscribe(t=>{t.order&&(m=m.map(e=>(e.invoice_id==t.order.invoice_id&&(e=t.order),e)),D(w,s={}),f())});return[l,i,u,o,a,[{name:"Refresh",icon:"refresh",function:"refresh"},{name:"Export",icon:"cloud-download",function:"export"}],function(t){switch(t.detail.function){case"refresh":p(0);break;case"export":{let t=[];m.forEach(e=>{if(e.payment){let n={order_date:B(e.createdAt).format("MM/DD h:mmA"),name:e.guest.name,phone:e.guest.phone,address:`${e.guest.address||""} ${e.guest.address2||""}`,isPickUp:e.guest.address?"N":"Y",amount:e.payment.amount.toFixed(2),paid:e.payment.paidAt?B(e.payment.paidAt).format("MM/DD h:mmA"):"",invoice:`https://pay.getorders.app/?i=${e.invoice_id}`};t=[...t,n]}}),H(Papa.unparse(t),"orders.csv","text/csv;encoding:utf-8")}}},p,g,h,["bg-gray-400","bg-gray-400","bg-gray-400","bg-yellow-500","bg-red-400","bg-green-500","bg-pink-500","bg-theme"],m,s,r,f,t=>D(z,a=[...a,{view:Dt,order:t}]),t=>g(t),t=>h(t),()=>p(i+1)]}export default class extends t{constructor(t){var s;super(),Yt.getElementById("svelte-qjn5fh-style")||((s=u("style")).id="svelte-qjn5fh-style",s.textContent=".action.svelte-qjn5fh{border-radius:9999px;color:#fff;margin-right:0.75rem;width:4rem;height:4rem;text-align:center;align-self:center;font-size:1.5rem;flex:none;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)}",h(Yt.head,s)),e(this,t,Nt,Ht,n,{})}}
//# sourceMappingURL=OrdersMan-cf5023b6.js.map
