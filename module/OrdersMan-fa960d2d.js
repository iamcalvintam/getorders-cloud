import{S as t,i as e,s as n,M as o,j as s,m as a,k as r,o as l,p as c,q as i,z as d,e as p,b as m,c as f,h as u,a as h,d as g,w as x,l as y,Q as $,n as b,ab as w,ac as v,t as j,x as k,g as Y,r as M,u as _,y as D,R as C,C as I,F as A,D as T,E as q}from"./App-69c7762d.js";import{T as z}from"./UIToolbar-25f7ac2a.js";import{U as E}from"./UIItem-2d5649a5.js";import{d as G}from"./dayjs.min-366cf409.js";function R(t){let e;return{c(){e=p("div"),e.textContent="Activate GetPayments",m(e,"slot","title"),m(e,"class","font-semibold text-xl text-gray-600 pb-3")},m(t,n){f(t,e,n)},d(t){t&&u(e)}}}function H(t){let e,n,o,s,a,r,l,c,i;return{c(){e=p("div"),n=p("p"),n.innerHTML="\n            In order to accept payments, your account has to first activate <b>GetPayments</b>.<br>\n            Tap here to contact our support to activate now.\n        ",o=h(),s=p("div"),a=p("button"),a.textContent="Contact Support",r=h(),l=p("div"),c=p("button"),c.textContent="Cancel",m(n,"class","text-gray-800 mb-6 text-center"),m(a,"class","p-2 w-1/2 shadow-md bg-theme text-white rounded-lg capitalize font-bold h-full shadow-md"),m(s,"class","flex justify-center mt-2"),m(c,"class","p-2 w-1/2 shadow-md bg-gray-400 text-white rounded-lg capitalize font-bold h-full shadow-md"),m(l,"class","flex justify-center mt-2"),m(e,"slot","content"),m(e,"class","h-64 p-2")},m(d,p,m){f(d,e,p),g(e,n),g(e,o),g(e,s),g(s,a),g(e,r),g(e,l),g(l,c),m&&x(i),i=[y(a,"click",t[0]),y(c,"click",$)]},p:b,d(t){t&&u(e),x(i)}}}function N(t){let e;return{c(){e=h()},m(t,n){f(t,e,n)},p:b,d(t){t&&u(e)}}}function P(t){let e;const n=new o({props:{$$slots:{default:[N],content:[H],title:[R]},$$scope:{ctx:t}}});return{c(){s(n.$$.fragment)},m(t,o){a(n,t,o),e=!0},p(t,[e]){const o={};4&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){c(n,t)}}}function U(t,e,n){let o;return i(t,d,t=>n(1,o=t)),[function(){w(`Hello, I would like to activate payments for my GetOrders account.\n üëâüèª My ID : ${o.settings.fire_id}`)}]}class B extends t{constructor(t){super(),e(this,t,U,P,n,{})}}const{document:L}=v;function O(t,e,n){const o=t.slice();return o[19]=e[n],o}function S(t,e,n){const o=t.slice();return o[16]=e[n],o}function W(t){let e;return{c(){e=j("PICKUP ORDER")},m(t,n){f(t,e,n)},p:b,d(t){t&&u(e)}}}function F(t){let e,n,o,s=t[19].guest.address+"",a=t[19].guest.address2+"";return{c(){e=j(s),n=h(),o=j(a)},m(t,s){f(t,e,s),f(t,n,s),f(t,o,s)},p(t,n){1&n&&s!==(s=t[19].guest.address+"")&&Y(e,s),1&n&&a!==(a=t[19].guest.address2+"")&&Y(o,a)},d(t){t&&u(e),t&&u(n),t&&u(o)}}}function Q(t){let e,n,o,s,a=G(t[19].payment.paid_at).format("DD/MM/YYYY h:mmA")+"";return{c(){e=p("p"),n=p("i"),o=j(" Paid on "),s=j(a),m(n,"class","icon ion-md-checkmark-circle pr-1"),m(e,"class","text-sm text-green-400 font-semibold")},m(t,a){f(t,e,a),g(e,n),g(e,o),g(e,s)},p(t,e){1&e&&a!==(a=G(t[19].payment.paid_at).format("DD/MM/YYYY h:mmA")+"")&&Y(s,a)},d(t){t&&u(e)}}}function K(t){let e,n;function o(...e){return t[13](t[19],...e)}return{c(){e=p("button"),e.innerHTML='<i class="icon ion-md-checkmark-circle-outline"></i>',m(e,"class","action bg-theme svelte-qjn5fh")},m(t,s,a){f(t,e,s),a&&n(),n=y(e,"click",o)},p(e,n){t=e},d(t){t&&u(e),n()}}}function J(t){let e,n,o,s,a,r,l,c,i,d,x,$,b,w,v,k,M,_=G(t[19].createdAt).format("h:mmA")+"",D=t[19].guest.name+"",C=t[19].guest.phone+"";function I(t,e){return t[19].guest.address?F:W}let A=I(t),T=A(t),q=t[19].payment&&1==t[19].payment.paid&&Q(t),z=!t[19].payment&&K(t);function E(...e){return t[14](t[19],...e)}return{c(){e=p("a"),n=p("p"),o=j(_),s=h(),a=p("p"),r=j(D),l=h(),c=p("p"),i=j(C),d=h(),x=p("p"),T.c(),$=h(),q&&q.c(),w=h(),z&&z.c(),v=h(),k=p("button"),k.innerHTML='<i class="icon ion-logo-whatsapp"></i>',m(n,"class","text-theme font-semibold"),m(a,"class","font-semibold leading-tight"),m(c,"class","leading-tight text-gray-600"),m(x,"class","text-sm"),m(e,"href",b=`https://pay.getorders.app/?i=${t[19].invoice_id}`),m(e,"target","_blank"),m(e,"class","flex-grow p-2"),m(k,"class","action bg-theme svelte-qjn5fh")},m(t,p,m){f(t,e,p),g(e,n),g(n,o),g(e,s),g(e,a),g(a,r),g(e,l),g(e,c),g(c,i),g(e,d),g(e,x),T.m(x,null),g(e,$),q&&q.m(e,null),f(t,w,p),z&&z.m(t,p),f(t,v,p),f(t,k,p),m&&M(),M=y(k,"click",E)},p(n,s){t=n,1&s&&_!==(_=G(t[19].createdAt).format("h:mmA")+"")&&Y(o,_),1&s&&D!==(D=t[19].guest.name+"")&&Y(r,D),1&s&&C!==(C=t[19].guest.phone+"")&&Y(i,C),A===(A=I(t))&&T?T.p(t,s):(T.d(1),T=A(t),T&&(T.c(),T.m(x,null))),t[19].payment&&1==t[19].payment.paid?q?q.p(t,s):(q=Q(t),q.c(),q.m(e,null)):q&&(q.d(1),q=null),1&s&&b!==(b=`https://pay.getorders.app/?i=${t[19].invoice_id}`)&&m(e,"href",b),t[19].payment?z&&(z.d(1),z=null):z?z.p(t,s):(z=K(t),z.c(),z.m(v.parentNode,v))},d(t){t&&u(e),T.d(),q&&q.d(),t&&u(w),z&&z.d(t),t&&u(v),t&&u(k),M()}}}function V(t){let e;const n=new E({props:{$$slots:{default:[J]},$$scope:{ctx:t}}});return{c(){s(n.$$.fragment)},m(t,o){a(n,t,o),e=!0},p(t,e){const o={};4194305&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(r(n.$$.fragment,t),e=!0)},o(t){l(n.$$.fragment,t),e=!1},d(t){c(n,t)}}}function X(t){let e,n,o,s,a,c=G(t[16]).format("ddd D/M/YY")+"",i=t[0][t[16]],d=[];for(let e=0;e<i.length;e+=1)d[e]=V(O(t,i,e));const x=t=>l(d[t],1,1,()=>{d[t]=null});return{c(){e=p("div"),n=j(c),o=h();for(let t=0;t<d.length;t+=1)d[t].c();s=k(),m(e,"class","rounded-lg bg-theme text-white text-lg font-semibold m-2 p-2")},m(t,r){f(t,e,r),g(e,n),f(t,o,r);for(let e=0;e<d.length;e+=1)d[e].m(t,r);f(t,s,r),a=!0},p(t,e){if((!a||1&e)&&c!==(c=G(t[16]).format("ddd D/M/YY")+"")&&Y(n,c),193&e){let n;for(i=t[0][t[16]],n=0;n<i.length;n+=1){const o=O(t,i,n);d[n]?(d[n].p(o,e),r(d[n],1)):(d[n]=V(o),d[n].c(),r(d[n],1),d[n].m(s.parentNode,s))}for(M(),n=i.length;n<d.length;n+=1)x(n);_()}},i(t){if(!a){for(let t=0;t<i.length;t+=1)r(d[t]);a=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)l(d[t]);a=!1},d(t){t&&u(e),t&&u(o),D(d,t),t&&u(s)}}}function Z(t){let e,n,o;return{c(){e=p("div"),n=p("button"),n.textContent="Show More",m(n,"class","p-2 w-1/2 shadow-md bg-theme text-white rounded-lg capitalize font-bold h-full shadow-md"),m(e,"class","flex justify-center mt-2")},m(s,a,r){f(s,e,a),g(e,n),r&&o(),o=y(n,"click",t[15])},p:b,d(t){t&&u(e),o()}}}function tt(t){let e,n,o,i;const d=new z({props:{class:"border-b border-gray-300",tools:t[3]}});d.$on("selected",t[4]);let p=Object.keys(t[0]),m=[];for(let e=0;e<p.length;e+=1)m[e]=X(S(t,p,e));const g=t=>l(m[t],1,1,()=>{m[t]=null});let x=t[2]&&Z(t);return{c(){s(d.$$.fragment),e=h();for(let t=0;t<m.length;t+=1)m[t].c();n=h(),x&&x.c(),o=k()},m(t,s){a(d,t,s),f(t,e,s);for(let e=0;e<m.length;e+=1)m[e].m(t,s);f(t,n,s),x&&x.m(t,s),f(t,o,s),i=!0},p(t,[e]){if(193&e){let o;for(p=Object.keys(t[0]),o=0;o<p.length;o+=1){const s=S(t,p,o);m[o]?(m[o].p(s,e),r(m[o],1)):(m[o]=X(s),m[o].c(),r(m[o],1),m[o].m(n.parentNode,n))}for(M(),o=p.length;o<m.length;o+=1)g(o);_()}t[2]?x?x.p(t,e):(x=Z(t),x.c(),x.m(o.parentNode,o)):x&&(x.d(1),x=null)},i(t){if(!i){r(d.$$.fragment,t);for(let t=0;t<p.length;t+=1)r(m[t]);i=!0}},o(t){l(d.$$.fragment,t),m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)l(m[t]);i=!1},d(t){c(d,t),t&&u(e),D(m,t),t&&u(n),x&&x.d(t),t&&u(o)}}}function et(t,e,n){let o,s,a;i(t,C,t=>n(9,o=t)),i(t,d,t=>n(10,s=t)),i(t,I,t=>n(11,a=t));let r={},l=0,c=!0,p=[];function m(t){0==t&&n(2,c=!0),n(1,l=t),A(C,o=!0),fetch(T(`/orders/${l}`),q()).then(t=>t.json()).then(t=>{A(C,o=!1),0==t.orders.length?n(2,c=!1):(p=0==l?t.orders:[...p,...t.orders],f())})}function f(){let t={};p.forEach(e=>{let n=G(e.createdAt).format("YYYY-MM-DD");t[n]=[...t[n]||[],e]}),n(0,r=t)}function u(t){if(s.settings.billplz_token){A(C,o=!0);let e={order_id:t.invoice_id,Accept:"application/json","Content-Type":"application/json","x-api-key":"EF95vGTnuo1GDqSQw6BmN41IR1G5R0Li8E5WIxlm"};fetch("https://api.getorders.app/payment/billplz",{method:"GET",headers:e}).then(t=>t.json()).then(e=>{p=p.map(n=>(n.invoice_id==t.invoice_id&&(n.payment={bill_id:e.bill_id,url:e.url}),n)),f(),A(C,o=!1)})}else A(I,a=[...a,{view:B}])}function h(t){let e=t.guest.phone;e.startsWith("01")&&(e="6"+e);let n=`https://api.whatsapp.com/send?phone=${e}&text=`,o="";t.payment&&(o=`Hey there! We *(${s.settings.name})* have received your order, tap here to pay now.`,o=`${o} üëâüèª https://pay.getorders.app/?i=${t.invoice_id}\n\n`);let a=encodeURIComponent(o);document.location.href=`${n}${a}`}m(0);return[r,l,c,[{name:"Refresh",icon:"refresh",function:"refresh"}],function(t){switch(t.detail.function){case"refresh":m(0)}},m,u,h,p,o,s,a,f,t=>u(t),t=>h(t),()=>m(l+1)]}export default class extends t{constructor(t){var o;super(),L.getElementById("svelte-qjn5fh-style")||((o=p("style")).id="svelte-qjn5fh-style",o.textContent=".action.svelte-qjn5fh{border-radius:9999px;color:#fff;margin-right:0.75rem;width:4rem;height:4rem;text-align:center;align-self:center;font-size:1.5rem;flex:none;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)}",g(L.head,o)),e(this,t,et,tt,n,{})}}
//# sourceMappingURL=OrdersMan-fa960d2d.js.map
