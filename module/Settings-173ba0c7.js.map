{"version":3,"file":"Settings-173ba0c7.js","sources":["../../src/UI/UISegmented.html","../../src/UI/UIList.html","../../src/Settings.html"],"sourcesContent":["<script>\n  export let segments = [], selected = {}, value = \"\", style = {}, label = \"\"\n  function select(s) {\n    selected = s;\n    value = s.value;\n  }\n  function round(i) {\n    if (i == 0) return \"rounded-l\";\n    if (i == segments.length - 1) return \"rounded-r\";\n    return \"\";\n  }\n</script>\n<div class=\"inline-flex {style.container}\">\n  <label\n    class=\"flex-none self-center text-xs uppercase text-gray-500 font-semibold {style.label || 'w-20' }\">{label}</label>\n  {#each segments as segment, i}\n  <button on:mousedown=\"{ () => select(segment) }\" class=\"bg-gray-{ segment.value==value ? '600' : '200'} text-gray-{ segment.value==value ? '100' : '600'} font-bold py-2 px-4 {round(i)}\">\n    {segment.name}\n  </button>\n  {/each}\n</div>","<script>\n  import { slide } from 'svelte/transition';\n  import { quintInOut } from 'svelte/easing';\n  export let value = [], label = \"\", placeholder = \"\", style = {}\n  function add(){\n    value = [...value, \"\"]\n  }\n  function remove(index){\n    value = [...value.slice(0,index), ...value.slice(index+1,value.length)];\n  }\n</script>\n<div class=\"{style.container}\">\n    <div class=\"flex\">\n      <label class=\"flex-grow self-center text-xs uppercase text-gray-500 font-semibold\">{label}</label>\n      <button class=\"flex-none\" on:click=\"{add}\">\n        <i class=\"icon ion-md-add text-xl\"></i>\n      </button>\n    </div>\n  {#each value as field, i}\n    <div class=\"flex rounded-lg bg-gray-100 p-2 my-2\" transition:slide=\"{{ duration: 300, easing: quintInOut }}\">\n      <input type=\"text\" class=\"flex-grow bg-gray-100 self-center\" placeholder=\"{placeholder}\" value=\"{field}\"/>\n      <button class=\"flex-none ml-2\" on:click=\"{ ()=>remove(i)}\">\n        <i class=\"icon ion-md-close text-xl\"></i>\n      </button>\n    </div>\n  {/each}\n</div>","<script>\n  import Segmented from './UI/UISegmented.html';\n  import TextField from './UI/UITextField.html';\n  import Toolbar from './UI/UIToolbar.html';\n  import List from './UI/UIList.html';\n  import { onMount } from 'svelte';\n  import { session, loading, api, alert, accounts, account, trigger, headers, settings } from './CTStore.js';\n  let tools = [{ name: \"Save\", icon: \"cloud-done\", function: \"save\" }]\n  function selected(e) {\n    switch (e.detail.function) {\n      case \"save\":\n        $loading = true;\n        fetch(api('/settings'), headers($settings.settings)).then(r => r.json()).then(o => {\n          $settings = o;\n          $loading = false;\n        }).catch(e => { });\n        break;\n    }\n  }\n  let params = {\n    Account: { name: { desc: \"Account name\", value: \"\", key: \"name\" } },\n    Points: {\n      multiplier: { desc: \"Points awarded per spending\", value: 1, key: \"multiplier\" },\n      rounding: { desc: \"Rounding for spending amount\", value: [\"no_rounding\", \"round_down\", \"round_up\"], key: \"rounding\" }\n    }\n  };\n\n  let field_style = { container: \"p-2 w-1/2 flex-none\", label: \"w-32\" }\n</script>\n<Toolbar class=\"border-b border-gray-300\" on:selected=\"{selected}\" tools=\"{tools}\" />\n\n{#if $settings.settings}\n<p class=\"text-xl font-bold mt-3\">\n  Account\n</p>\n<div class=\"flex\">\n  <TextField style=\"{field_style}\" label=\"Name\" bind:value=\"{$settings.settings.name}\" />\n</div>\n<p class=\"text-xl font-bold mt-3\">\n  Orders\n</p>\n<div>\n  <TextField style=\"{field_style}\" label=\"Identifier\" bind:value=\"{$settings.settings.short_id}\" />\n  <p class=\"text-xs px-3 mb-3 font-semibold\">\n    <a href=\"https://instant.getorders.app/?m={$settings.settings.short_id}\" target=\"_blank\">https://instant.getorders.app/?m={$settings.settings.short_id}</a>\n  </p>\n  <TextField style=\"{field_style}\" label=\"Delivery Fees\" bind:value=\"{$settings.settings.delivery_fees}\" />\n  <TextField style=\"{field_style}\" label=\"Phone Number\" bind:value=\"{$settings.settings.phone}\" />\n  <TextField style=\"{field_style}\" label=\"Checkout Notes\" bind:value=\"{$settings.settings.checkout_notes}\" />\n    <Segmented style=\"{field_style}\" label=\"Order Methods\"\n      segments=\"{[{ name : 'All', value : ''}, { name : 'No Delivery', value : 'no_delivery'}]}\"\n      bind:value=\"{$settings.settings.order_methods}\" />\n</div>\n<p class=\"text-xl font-bold mt-3\">\n  Loyalty\n</p>\n<div>\n  <TextField style=\"{field_style}\" label=\"Multiplier\" bind:value=\"{$settings.settings.multiplier}\" />\n  <Segmented style=\"{field_style}\" label=\"Rounding\" segments=\"{[{ name : 'No Rounding', value : ''}, { name : 'Round Down', value : 'round_down'}, { name : 'Round Up', value : 'round_up'}]}\" bind:value=\"{$settings.settings.rounding}\" />\n  <List style=\"{field_style}\" label=\"Deduction Presets\" placeholder=\"e.g : 100\" bind:value=\"{$settings.settings.deduct_presets}\" />\n</div>\n{/if}"],"names":["ctx","name","value","length","label","container","segments","selected","style","select","s","i","segment","duration","easing","quintInOut","placeholder","remove","index","slice","settings","short_id","delivery_fees","phone","checkout_notes","order_methods","multiplier","rounding","deduct_presets","icon","function","e","detail","$loading","fetch","api","headers","$settings","then","r","json","o","catch","Account","desc","key","Points"],"mappings":"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"}