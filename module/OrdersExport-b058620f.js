import{S as t,i as e,s,M as a,j as n,m as o,k as r,o as c,p as l,q as i,z as d,e as p,b as m,c as u,h as f,a as g,d as $,l as x,R as y,n as h,w as v,ah as b,ai as w,r as C,u as N,F as O,G as T,t as D,g as M,v as A,D as E,E as S,a3 as k,L as I}from"./Web-e295f046.js";import{S as _}from"./UISegmented-8e6dd59f.js";import{d as j}from"./dayjs.min-056200c8.js";function Y(t){let e;return{c(){e=p("div"),e.textContent="Activate GetPayments",m(e,"slot","title"),m(e,"class","font-semibold text-xl text-gray-600 pb-3")},m(t,s){u(t,e,s)},d(t){t&&f(e)}}}function R(t){let e,s,a,n,o,r,c,l,i,d;return{c(){e=p("div"),s=p("p"),s.innerHTML="In order to accept payments, your account has to first activate <b>GetPayments</b>.<br/>\n            Tap here to contact our support to activate now.",a=g(),n=p("div"),o=p("button"),o.textContent="Contact Support",r=g(),c=p("div"),l=p("button"),l.textContent="Cancel",m(s,"class","text-gray-800 mb-6 text-center"),m(o,"class","p-2 w-1/2 shadow-md bg-theme text-white rounded-lg capitalize font-bold h-full shadow-md"),m(n,"class","flex justify-center mt-2"),m(l,"class","p-2 w-1/2 shadow-md bg-gray-400 text-white rounded-lg capitalize font-bold h-full shadow-md"),m(c,"class","flex justify-center mt-2"),m(e,"slot","content"),m(e,"class","h-64 p-2")},m(p,m){u(p,e,m),$(e,s),$(e,a),$(e,n),$(n,o),$(e,r),$(e,c),$(c,l),i||(d=[x(o,"click",t[0]),x(l,"click",y)],i=!0)},p:h,d(t){t&&f(e),i=!1,v(d)}}}function P(t){let e;return{c(){e=g()},m(t,s){u(t,e,s)},p:h,d(t){t&&f(e)}}}function U(t){let e,s;return e=new a({props:{$$slots:{default:[P],content:[R],title:[Y]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},m(t,a){o(e,t,a),s=!0},p(t,[s]){const a={};4&s&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){s||(r(e.$$.fragment,t),s=!0)},o(t){c(e.$$.fragment,t),s=!1},d(t){l(e,t)}}}function z(t,e,s){let a;return i(t,d,t=>s(1,a=t)),[function(){b("Hello, I would like to activate payments for my GetOrders account.\n 👉🏻 My ID : "+a.settings.fire_id)}]}class L extends t{constructor(t){super(),e(this,t,z,U,s,{})}}function G(t){let e,s;return e=new I({props:{$$slots:{message:[H]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},m(t,a){o(e,t,a),s=!0},i(t){s||(r(e.$$.fragment,t),s=!0)},o(t){c(e.$$.fragment,t),s=!1},d(t){l(e,t)}}}function H(t){let e;return{c(){e=p("div"),e.textContent="Extracting data..",m(e,"slot","message")},m(t,s){u(t,e,s)},d(t){t&&f(e)}}}function F(t){let e,s,a=t[3]&&G(t);return{c(){e=p("div"),a&&a.c(),m(e,"slot","loader")},m(t,n){u(t,e,n),a&&a.m(e,null),s=!0},p(t,s){t[3]?a?8&s&&r(a,1):(a=G(t),a.c(),r(a,1),a.m(e,null)):a&&(C(),c(a,1,1,()=>{a=null}),N())},i(t){s||(r(a),s=!0)},o(t){c(a),s=!1},d(t){t&&f(e),a&&a.d()}}}function B(t){let e;return{c(){e=p("div"),e.textContent="Export Orders",m(e,"slot","title"),m(e,"class","font-semibold text-xl text-gray-600 pb-3")},m(t,s){u(t,e,s)},d(t){t&&f(e)}}}function J(t){let e,s,a,i,d,h,b,w,C,N,E,S,k,I,j,Y,R,P,U,z,L,G,H,F,B,J,W,q,K,Z,Q,V=t[1].format("ddd D/M/YY")+"";function X(e){t[9].call(null,e)}let tt={style:t[4],label:"",segments:[{name:"Default",value:""},{name:"Zepto",value:"zepto"},{name:"Mr Speedy",value:"speedy"}]};function et(e){t[10].call(null,e)}void 0!==t[2]&&(tt.value=t[2]),j=new _({props:tt}),O.push(()=>T(j,"value",X));let st={style:t[4],label:"",segments:[{name:"Paid",value:"paid"},{name:"All",value:""}]};return void 0!==t[0].type&&(st.value=t[0].type),L=new _({props:st}),O.push(()=>T(L,"value",et)),{c(){e=p("div"),s=p("p"),s.textContent="Select a day to export from",a=g(),i=p("div"),d=p("button"),d.innerHTML='<i class="far fa-arrow-alt-circle-left"></i>',h=g(),b=p("div"),w=D(V),C=g(),N=p("button"),N.innerHTML='<i class="far fa-arrow-alt-circle-right"></i>',E=g(),S=p("p"),S.textContent="Select format to export to",k=g(),I=p("div"),n(j.$$.fragment),R=g(),P=p("p"),P.textContent="Export Options",U=g(),z=p("div"),n(L.$$.fragment),H=g(),F=p("div"),B=p("button"),B.textContent="Export Now",J=g(),W=p("div"),q=p("button"),q.textContent="Cancel",m(s,"class","text-gray-800 mb-2 text-center"),m(b,"class","flex-grow self-center text-center"),m(i,"class","flex text-lg font-semibold m-2"),m(S,"class","text-gray-800 my-2 text-center"),m(I,"class","flex justify-center"),m(P,"class","text-gray-800 my-2 text-center"),m(z,"class","flex justify-center"),m(B,"class","p-2 w-1/2 shadow-md bg-theme text-white rounded-lg capitalize font-bold h-full shadow-md"),m(F,"class","flex justify-center mt-2"),m(q,"class","p-2 w-1/2 shadow-md bg-gray-400 text-white rounded-lg capitalize font-bold h-full shadow-md"),m(W,"class","flex justify-center my-2"),m(e,"slot","content"),m(e,"class","p-2")},m(n,r){u(n,e,r),$(e,s),$(e,a),$(e,i),$(i,d),$(i,h),$(i,b),$(b,w),$(i,C),$(i,N),$(e,E),$(e,S),$(e,k),$(e,I),o(j,I,null),$(e,R),$(e,P),$(e,U),$(e,z),o(L,z,null),$(e,H),$(e,F),$(F,B),$(e,J),$(e,W),$(W,q),K=!0,Z||(Q=[x(d,"click",t[7]),x(N,"click",t[8]),x(B,"click",t[6]),x(q,"click",y)],Z=!0)},p(t,e){(!K||2&e)&&V!==(V=t[1].format("ddd D/M/YY")+"")&&M(w,V);const s={};!Y&&4&e&&(Y=!0,s.value=t[2],A(()=>Y=!1)),j.$set(s);const a={};!G&&1&e&&(G=!0,a.value=t[0].type,A(()=>G=!1)),L.$set(a)},i(t){K||(r(j.$$.fragment,t),r(L.$$.fragment,t),K=!0)},o(t){c(j.$$.fragment,t),c(L.$$.fragment,t),K=!1},d(t){t&&f(e),l(j),l(L),Z=!1,v(Q)}}}function W(t){let e,s;return{c(){e=g(),s=g()},m(t,a){u(t,e,a),u(t,s,a)},p:h,i:h,o:h,d(t){t&&f(e),t&&f(s)}}}function q(t){let e,s,i,d,x;return d=new a({props:{$$slots:{default:[W],content:[J],title:[B],loader:[F]},$$scope:{ctx:t}}}),{c(){e=p("script"),i=g(),n(d.$$.fragment),e.src!==(s="https://unpkg.com/papaparse@latest/papaparse.min.js")&&m(e,"src","https://unpkg.com/papaparse@latest/papaparse.min.js")},m(t,s){$(document.head,e),u(t,i,s),o(d,t,s),x=!0},p(t,[e]){const s={};16399&e&&(s.$$scope={dirty:e,ctx:t}),d.$set(s)},i(t){x||(r(d.$$.fragment,t),x=!0)},o(t){c(d.$$.fragment,t),x=!1},d(t){f(e),t&&f(i),l(d,t)}}}function K(t,e,s){let a,n;i(t,w,t=>s(11,a=t)),i(t,d,t=>s(12,n=t));let o={type:"paid"},r=j(),c="",l=!1;function p(t){s(1,r=r.add(t,"day"))}return[o,r,c,l,{container:"p-2 mb-3",label:"w-32"},p,function(){s(3,l=!0),E(S("/orders"),{sub:a.fire_id,order_type:o.type,from:r.startOf("day").toJSON(),to:r.endOf("day").toJSON()},"GET").then(t=>{s(3,l=!1),function(t){let e=[];switch(c){case"":e=t.map(t=>({order_date:j(t.createdAt).format("MM/DD hh:mm"),name:t.guest.name,phone:t.guest.phone,address:`${t.guest.address||""} ${t.guest.address2||""}`,postcode:t.guest.postcode,notes:t.notes,isPickUp:t.guest.address?"N":"Y",amount:t.payment?t.payment.amount.toFixed(2):"10.00",paid:t.payment?j(t.payment.paidAt||t.createdAt).format("MM/DD hh:mm"):"",invoice:"https://pay.getorders.app/?i="+t.invoice_id}));break;case"speedy":e=t.map(t=>({"Address(mandatory field)":`${t.guest.address||""} ${t.guest.address2||""}`,"Contact person":t.guest.name,"Recipient's phone (mandatory field)":t.guest.phone,"Parcel contents(mandatory field)":"FOOD","Weight in kg(mandatory field)":.5,"Internal order number":t.invoice_id,"Comment for courier":t.notes||"","Apartment / office number":"","Need to return on pickup point":"",'Time "since" on point':j(t.createdAt).format("DD.MM.YYYY hh:mm:ss"),'Time "till" on point':j(t.createdAt).add(1,"hour").format("DD.MM.YYYY hh:mm:ss"),"COD amount":"0","Buyout amount":"0","Do not fill anything in this column":"","Declared value":t.payment?t.payment.amount.toFixed(2):"10.00","Courier needs motorbox":"x"}));break;case"zepto":e=t.map(t=>({UNIT_NO:"",ADDRESS:`${t.guest.address||""} ${t.guest.address2||""}`,CONTACT_PERSON:t.guest.name,CONTACT_NUMBER:t.guest.phone,EMAIL:"",INSTRUCTION_NOTE:t.notes||""})),e=[{UNIT_NO:"",ADDRESS:`${n.settings.address||""} ${n.settings.address2||""} ${n.settings.postcode||""}`,CONTACT_PERSON:n.settings.name,CONTACT_NUMBER:n.settings.phone,EMAIL:"",INSTRUCTION_NOTE:"PICKUP HERE"},...e]}k(Papa.unparse(e),"orders.csv","text/csv;encoding:utf-8")}(t.orders)})},()=>p(-1),()=>p(1),function(t){c=t,s(2,c)},function(t){o.type=t,s(0,o)}]}class Z extends t{constructor(t){super(),e(this,t,K,q,s,{})}}export{L as A,Z as O};
//# sourceMappingURL=OrdersExport-b058620f.js.map
