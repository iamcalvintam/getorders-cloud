import{S as e,i as t,s,al as l,e as n,d as a,F as r,G as o,t as c,a as i,x as d,b as u,c as f,g as m,h as p,y as g,j as h,m as y,l as v,v as x,k as j,o as b,p as $,w as O,q as k,U as w,z as E,D as F,E as T,C as q,ak as M,a3 as A}from"./Web-f665e459.js";import{T as P}from"./UIToolbar-18ac6b84.js";import"./UIItem-7a1fe2e1.js";import{S}from"./UISegmented-60ba4dbf.js";import{d as U}from"./dayjs.min-056200c8.js";const{document:I}=l;function N(e,t,s){const l=e.slice();return l[35]=t[s],l}function D(e,t,s){const l=e.slice();return l[32]=t[s],l}function V(e,t,s){const l=e.slice();return l[29]=t[s],l}function Y(e,t,s){const l=e.slice();return l[26]=t[s],l}function B(e){let t,s,l,r,o,d,g,h,y,v,x,j,b,$,O,k,w,E,F,T=e[8](e[29]).name+"",q=e[32]+"",M=e[35]+"",A=e[2][e[29]][e[32]][e[35]].quantity+"",P=e[2][e[29]][e[32]][e[35]].amount.toFixed(2)+"",S=(e[2][e[29]][e[32]][e[35]].quantity*e[2][e[29]][e[32]][e[35]].amount).toFixed(2)+"";return{c(){t=n("tr"),s=n("td"),l=c(T),r=i(),o=n("td"),d=c(q),g=i(),h=n("td"),y=c(M),v=i(),x=n("td"),j=c(A),b=i(),$=n("td"),O=c(P),k=i(),w=n("td"),E=c(S),F=i(),u(s,"class","svelte-1ioxuj4"),u(o,"class","svelte-1ioxuj4"),u(h,"class","svelte-1ioxuj4"),u(x,"class","svelte-1ioxuj4"),u($,"class","svelte-1ioxuj4"),u(w,"class","svelte-1ioxuj4")},m(e,n){f(e,t,n),a(t,s),a(s,l),a(t,r),a(t,o),a(o,d),a(t,g),a(t,h),a(h,y),a(t,v),a(t,x),a(x,j),a(t,b),a(t,$),a($,O),a(t,k),a(t,w),a(w,E),a(t,F)},p(e,t){8&t[0]&&T!==(T=e[8](e[29]).name+"")&&m(l,T),12&t[0]&&q!==(q=e[32]+"")&&m(d,q),12&t[0]&&M!==(M=e[35]+"")&&m(y,M),12&t[0]&&A!==(A=e[2][e[29]][e[32]][e[35]].quantity+"")&&m(j,A),12&t[0]&&P!==(P=e[2][e[29]][e[32]][e[35]].amount.toFixed(2)+"")&&m(O,P),12&t[0]&&S!==(S=(e[2][e[29]][e[32]][e[35]].quantity*e[2][e[29]][e[32]][e[35]].amount).toFixed(2)+"")&&m(E,S)},d(e){e&&p(t)}}}function H(e){let t,s=Object.keys(e[2][e[29]][e[32]]),l=[];for(let t=0;t<s.length;t+=1)l[t]=B(N(e,s,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=d()},m(e,s){for(let t=0;t<l.length;t+=1)l[t].m(e,s);f(e,t,s)},p(e,n){if(780&n[0]){let a;for(s=Object.keys(e[2][e[29]][e[32]]),a=0;a<s.length;a+=1){const r=N(e,s,a);l[a]?l[a].p(r,n):(l[a]=B(r),l[a].c(),l[a].m(t.parentNode,t))}for(;a<l.length;a+=1)l[a].d(1);l.length=s.length}},d(e){g(l,e),e&&p(t)}}}function L(e){let t,s=Object.keys(e[2][e[29]]),l=[];for(let t=0;t<s.length;t+=1)l[t]=H(D(e,s,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=d()},m(e,s){for(let t=0;t<l.length;t+=1)l[t].m(e,s);f(e,t,s)},p(e,n){if(780&n[0]){let a;for(s=Object.keys(e[2][e[29]]),a=0;a<s.length;a+=1){const r=D(e,s,a);l[a]?l[a].p(r,n):(l[a]=H(r),l[a].c(),l[a].m(t.parentNode,t))}for(;a<l.length;a+=1)l[a].d(1);l.length=s.length}},d(e){g(l,e),e&&p(t)}}}function C(e){let t,s,l,r,o,h,y,v,x,j,b=e[26]+"",$=e[9](e[26]),O=[];for(let t=0;t<$.length;t+=1)O[t]=L(V(e,$,t));return{c(){t=n("tr"),s=n("td"),l=c(b),r=n("td"),o=n("td"),h=n("td"),y=n("td"),v=n("td"),x=i();for(let e=0;e<O.length;e+=1)O[e].c();j=d(),u(s,"class","svelte-1ioxuj4"),u(r,"class","svelte-1ioxuj4"),u(o,"class","svelte-1ioxuj4"),u(h,"class","svelte-1ioxuj4"),u(y,"class","svelte-1ioxuj4"),u(v,"class","svelte-1ioxuj4"),u(t,"class","bg-gray-600 text-white")},m(e,n){f(e,t,n),a(t,s),a(s,l),a(t,r),a(t,o),a(t,h),a(t,y),a(t,v),f(e,x,n);for(let t=0;t<O.length;t+=1)O[t].m(e,n);f(e,j,n)},p(e,t){if(8&t[0]&&b!==(b=e[26]+"")&&m(l,b),780&t[0]){let s;for($=e[9](e[26]),s=0;s<$.length;s+=1){const l=V(e,$,s);O[s]?O[s].p(l,t):(O[s]=L(l),O[s].c(),O[s].m(j.parentNode,j))}for(;s<O.length;s+=1)O[s].d(1);O.length=$.length}},d(e){e&&p(t),e&&p(x),g(O,e),e&&p(j)}}}function G(e){let t,s,l,d,k,w,E,F,T,q,M,A,U,N,D,V,B,H,L,G,J,Q,z,R,W,_,K,X=e[0].format("ddd D/M/YY")+"";function Z(t){e[12].call(null,t)}d=new P({props:{class:"border-b border-gray-300",tools:e[6]}}),d.$on("selected",e[7]);let ee={style:e[11],label:"Orders Filter",segments:[{name:"Paid",value:"paid"},{name:"All",value:"all"}]};function te(t){e[13].call(null,t)}void 0!==e[4].type&&(ee.value=e[4].type),E=new S({props:ee}),r.push(()=>o(E,"value",Z));let se={style:e[11],label:"Display",segments:[{name:"All",value:""},{name:"By Vendor",value:"true"}]};void 0!==e[1]&&(se.value=e[1]),q=new S({props:se}),r.push(()=>o(q,"value",te));let le=Object.keys(e[3]),ne=[];for(let t=0;t<le.length;t+=1)ne[t]=C(Y(e,le,t));return{c(){t=n("script"),l=i(),h(d.$$.fragment),k=i(),w=n("div"),h(E.$$.fragment),T=i(),h(q.$$.fragment),A=i(),U=n("div"),N=n("button"),N.innerHTML='<i class="far fa-arrow-alt-circle-left"></i>',D=i(),V=n("div"),B=c(X),H=i(),L=n("button"),L.innerHTML='<i class="far fa-arrow-alt-circle-right"></i>',G=i(),J=n("div"),Q=n("table"),z=n("tr"),z.innerHTML='<td class="svelte-1ioxuj4">Product</td> \n            <td class="svelte-1ioxuj4">Variant</td> \n            <td class="svelte-1ioxuj4">Modifiers</td> \n            <td class="svelte-1ioxuj4">Quantity</td> \n            <td class="svelte-1ioxuj4">Unit Price</td> \n            <td class="svelte-1ioxuj4"><b>Total</b></td>',R=i();for(let e=0;e<ne.length;e+=1)ne[e].c();t.src!==(s="https://unpkg.com/papaparse@latest/papaparse.min.js")&&u(t,"src","https://unpkg.com/papaparse@latest/papaparse.min.js"),u(w,"class","border-t border-b border-gray-200 flex"),u(V,"class","flex-grow self-center text-center"),u(U,"class","flex text-lg font-semibold m-2"),u(z,"class","bg-theme text-white rounded-lg"),u(Q,"class","w-full"),u(J,"class","m-2")},m(s,n){a(I.head,t),f(s,l,n),y(d,s,n),f(s,k,n),f(s,w,n),y(E,w,null),a(w,T),y(q,w,null),f(s,A,n),f(s,U,n),a(U,N),a(U,D),a(U,V),a(V,B),a(U,H),a(U,L),f(s,G,n),f(s,J,n),a(J,Q),a(Q,z),a(Q,R);for(let e=0;e<ne.length;e+=1)ne[e].m(Q,null);W=!0,_||(K=[v(N,"click",e[14]),v(L,"click",e[15])],_=!0)},p(e,t){const s={};!F&&16&t[0]&&(F=!0,s.value=e[4].type,x(()=>F=!1)),E.$set(s);const l={};if(!M&&2&t[0]&&(M=!0,l.value=e[1],x(()=>M=!1)),q.$set(l),(!W||1&t[0])&&X!==(X=e[0].format("ddd D/M/YY")+"")&&m(B,X),780&t[0]){let s;for(le=Object.keys(e[3]),s=0;s<le.length;s+=1){const l=Y(e,le,s);ne[s]?ne[s].p(l,t):(ne[s]=C(l),ne[s].c(),ne[s].m(Q,null))}for(;s<ne.length;s+=1)ne[s].d(1);ne.length=le.length}},i(e){W||(j(d.$$.fragment,e),j(E.$$.fragment,e),j(q.$$.fragment,e),W=!0)},o(e){b(d.$$.fragment,e),b(E.$$.fragment,e),b(q.$$.fragment,e),W=!1},d(e){p(t),e&&p(l),$(d,e),e&&p(k),e&&p(w),$(E),$(q),e&&p(A),e&&p(U),e&&p(G),e&&p(J),g(ne,e),_=!1,O(K)}}}function J(e,t,s){let l,n,a;k(e,w,e=>s(20,l=e)),k(e,E,e=>s(21,a=e));let r=U(),o=M({type:"paid"}),c="";k(e,o,e=>s(4,n=e));let i={},d=[],u=[],f={"All Orders":[]};function m(e){q(w,l=!0),F(T("/orders"),{groupBy:"products",order_type:n.type,from:r.startOf("day").toJSON(),to:r.endOf("day").toJSON()},"GET").then(e=>{q(w,l=!1),s(2,i=e.variants),d=e.products,s(3,f),s(1,c),s(19,u)})}function p(e){return d.find(t=>t.id.toString()==e)||{name:"-"}}function g(e){return"All Orders"==e?Object.keys(i):Object.keys(i).filter(t=>f[e].includes(t))}function h(e){s(0,r=r.add(e,"day")),m()}m(),F(T("/vendor")).then(e=>{s(19,u=e)}),o.subscribe(e=>{m()});return e.$$.update=()=>{if(524290&e.$$.dirty[0])if("true"==c){let e={};u.forEach(t=>{e[t.name]=t.products.map(e=>e.id)}),s(3,f=e)}else s(3,f={"All Orders":[]})},[r,c,i,f,n,o,[{name:"Refresh",icon:"refresh",function:"refresh"},{name:"Export",icon:"cloud-download",function:"export"}],function(e){switch(e.detail.function){case"refresh":m();break;case"export":{let e=[];Object.keys(f).forEach(t=>{g(t).forEach(s=>{Object.keys(i[s]).forEach(l=>{Object.keys(i[s][l]).forEach(n=>{let a=i[s][l][n],r={Product:p(s).name,Variant:l,Modifiers:n,Quantity:a.quantity,"Unit Price":a.amount.toFixed(2),Total:(a.quantity*a.amount).toFixed(2)};"All Orders"!=t&&(r.Vendor=t),e=[...e,r]})})})}),A(Papa.unparse(e),"orders.csv","text/csv;encoding:utf-8")}}},p,g,h,{container:"p-2 flex-none",label:"w-32"},function(e){n.type=e,o.set(n)},function(e){c=e,s(1,c)},()=>h(-1),()=>h(1)]}export default class extends e{constructor(e){var l;super(),I.getElementById("svelte-1ioxuj4-style")||((l=n("style")).id="svelte-1ioxuj4-style",l.textContent="td.svelte-1ioxuj4{padding:0.5rem}",a(I.head,l)),t(this,e,J,G,s,{},[-1,-1])}}
//# sourceMappingURL=OrderSummary-75a4e308.js.map
