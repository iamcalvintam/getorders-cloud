{"version":3,"file":"ProductSelectionView-92e85e2b.js","sources":["../../src/ProductSelectionView.html"],"sourcesContent":["<script>\n    import { onMount } from 'svelte';\n    import Toolbar from './UI/UIToolbar.html'\n    import ModalView from './UI/UIModalView.html'\n    import TextField from './UI/UITextField.html'\n    import Loading from './UI/UILoading.html'\n    import UIItem from './UI/UIItem.html'\n    import { session, api, alert, accounts, modal, apply, customers, pop_modal } from './CTStore.js';\n    export let products = [], selected_prods = [], max_selection = 0;\n    let field_style = { container: 'w-full' }\n    let style = { body: 'screen-height-xs', content: 'overflow-y-scroll scrolling-touch' }\n    let tools = [{ name: \"Close\", icon: \"close-circle\", function: \"pop_modal\" },\n    { name: \"Save\", icon: \"checkmark-circle\", function: \"save\" }]\n    let tool_style = { container: \"justify-end\" }\n    function selected(e) {\n        if (e.detail.function == 'pop_modal') {\n            pop_modal()\n        }\n        if (e.detail.function == 'save') {\n            $apply = { selected_prods };\n            pop_modal()\n        }\n    }\n    function contains(product) {\n        return selected_prods.find(p => p.id == product.id)\n    }\n    function toggle(product) {\n        let len = selected_prods.length\n        selected_prods = selected_prods.filter(p => p.id != product.id)\n        if (selected_prods.length == len) {\n            //Add\n            selected_prods = [...selected_prods, { id: '' + product.id, name: product.name, variants : product.variants || [] }]\n        }\n        products = products;\n    }\n</script>\n<ModalView style=\"{style}\">\n    <div slot=\"title\" class=\"font-semibold text-xl text-gray-600 pb-3\">\n        Select Products\n    </div>\n    <div slot=\"content\" class=\"p-2\">\n        {#each products as product}\n            <UIItem>\n              <div class=\"flex w-full m-3\" on:click=\"{ () => { toggle(product) } }\">\n                <i class=\"pr-3 self-center fas { contains(product) ? 'fa-check-square' : 'fa-square' }\"></i>\n                {product.name}\n              </div>\n            </UIItem>\n        {/each}\n    </div>\n    <div slot=\"toolbar\">\n        <Toolbar on:selected=\"{selected}\" tools=\"{tools}\" style=\"{tool_style}\" />\n    </div>\n</ModalView>"],"names":["ctx","name","length","products","selected_prods","max_selection","toggle","product","len","filter","p","id","variants","body","content","icon","function","container","e","detail","pop_modal","$apply","find"],"mappings":"6lBA6CiBA,MAAQC,2IADwBD,KAASA,OAAW,kBAAoB,uKAAxCA,KAASA,OAAW,kBAAoB,0CACxEA,MAAQC,4VAJVD,0BAALE,sQAAKF,aAALE,qHAAAA,8DAAAA,sKAUwCF,WAAgBA,gCAAnCA,oVAfZA,8UA5BJG,wBAAeC,uBAAqBC,EAAgB,cAkBtDC,EAAOC,OACRC,EAAMJ,EAAeF,WACzBE,EAAiBA,EAAeK,OAAOC,GAAKA,EAAEC,IAAMJ,EAAQI,KACxDP,EAAeF,QAAUM,OAEzBJ,MAAqBA,GAAkBO,GAAI,GAAKJ,EAAQI,GAAIV,KAAMM,EAAQN,KAAMW,SAAWL,EAAQK,0KArB7FC,KAAM,mBAAoBC,QAAS,uCAClCb,KAAM,QAASc,KAAM,eAAgBC,SAAU,cAC5Df,KAAM,OAAQc,KAAM,mBAAoBC,SAAU,UACjCC,UAAW,wBACZC,GACW,aAArBA,EAAEC,OAAOH,UACTI,IAEqB,QAArBF,EAAEC,OAAOH,eACTK,GAAWjB,eAAAA,IACXgB,eAGUb,UACPH,EAAekB,KAAKZ,GAAKA,EAAEC,IAAMJ,EAAQI,cAfhCM,UAAW,cAkC4BX,EAAOC"}