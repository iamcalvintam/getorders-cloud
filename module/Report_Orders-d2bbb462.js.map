{"version":3,"file":"Report_Orders-d2bbb462.js","sources":["../../src/Report_Orders.html"],"sourcesContent":["<script>\n      import Loading from './UI/UILoading.html';\n  import dayjs from \"dayjs\"\nimport { session, loading, api, headers, accounts, trigger, selected_obj } from './CTStore.js';\n  import { onMount } from 'svelte';\n  let sessions = [], dates = []\n  onMount(() => {\n      fetch(api('/report/orders'),headers({ fran_id : $accounts[0].franchise_id })).then(r => r.json()).then(r => {\n        sessions = r\n        let dd = {}\n        r.forEach(s => { dd[dayjs(s.createdAt).format('DD/MM/YYYY')] = ''})\n        dates = Object.keys(dd)\n      })\n    });\n  function get_sessions(date){\n    return sessions.filter(s => date == dayjs(s.createdAt).format('DD/MM/YYYY'))\n  }\n</script>\n{#if dates.length==0}\n  <Loading>\n    <div slot=\"message\">\n      Generating Report..\n    </div>\n  </Loading>\n{:else}\n{#each dates as date}\n<div>\n  <div class=\"p-3 bg-gray-500 text-white\">{date}</div>\n  {#each get_sessions(date) as session}\n  <div class=\"p-3 flex\">\n     <div class=\"w-24 text-gray-600 self-center\">{dayjs(session.createdAt).format('h:mm a')}</div>\n     <div class=\"flex-grow self-center\">Table {session.table_name}</div>\n     <div class=\"rounded-lg bg-orange-400 text-white p-2 text-sm\">{session.orders.length} orders</div>\n  </div>\n  {/each}\n</div>\n{/each}\n{/if}"],"names":["ctx","length","dayjs","createdAt","format","table_name","orders","sessions","dates","onMount","fetch","api","headers","fran_id","$accounts","franchise_id","then","r","json","dd","forEach","s","Object","keys","date","filter"],"mappings":"uYAyBOA,0BAALC,wKAAKD,aAALC,qIAAAA,uWAKgDC,EAAMF,KAAQG,WAAWC,OAAO,eACnCJ,KAAQK,gBACYL,KAAQM,OAAOL,oZAFhCC,EAAMF,KAAQG,WAAWC,OAAO,kCACnCJ,KAAQK,mCACYL,KAAQM,OAAOL,iEALvCD,UAClCA,KAAaA,2BAAlBC,+QADuCD,kCAClCA,KAAaA,cAAlBC,0HAAAA,wOAVe,GAAdD,KAAMC,sVAbLM,KAAeC,YACnBC,OACIC,MAAMC,EAAI,kBAAkBC,GAAUC,QAAUC,EAAU,GAAGC,gBAAiBC,KAAKC,GAAKA,EAAEC,QAAQF,KAAKC,IACrGV,EAAWU,MACPE,KACJF,EAAEG,QAAQC,IAAOF,EAAGjB,EAAMmB,EAAElB,WAAWC,OAAO,eAAiB,SAC/DI,EAAQc,OAAOC,KAAKJ,oBAGJK,UACbjB,EAASkB,OAAOJ,GAAKG,GAAQtB,EAAMmB,EAAElB,WAAWC,OAAO"}