import{S as e,i as t,s as n,e as o,d as l,M as s,j as c,m as a,k as r,o as i,p as d,q as u,U as f,C as p,D as m,E as $,F as g,b as v,c as h,r as x,u as b,h as _,t as y,g as w,G as k,H as C,a as j,a7 as P,ac as N,w as V,l as B,v as E,y as S,n as T,Q as z,ad as I,L as O,x as U,T as A}from"./App-142a785f.js";import{T as M}from"./UITextField-3524d4c2.js";import{T as D}from"./UIToolbar-26b5f3b9.js";import{U as F}from"./UIItem-29f1bba6.js";import{P as G}from"./ProductSelectionView-d2ec6311.js";function H(e,t,n){const o=e.slice();return o[25]=t[n],o}function L(e,t,n){const o=e.slice();return o[28]=t[n],o[30]=n,o}function q(e){let t;const n=new O({props:{$$slots:{message:[Q]},$$scope:{ctx:e}}});return{c(){c(n.$$.fragment)},m(e,o){a(n,e,o),t=!0},i(e){t||(r(n.$$.fragment,e),t=!0)},o(e){i(n.$$.fragment,e),t=!1},d(e){d(n,e)}}}function Q(e){let t;return{c(){t=o("div"),t.textContent="One Moment Please..",v(t,"slot","message")},m(e,n){h(e,t,n)},d(e){e&&_(t)}}}function J(e){let t,n,l=e[2]&&q(e);return{c(){t=o("div"),l&&l.c(),v(t,"slot","loader")},m(e,o){h(e,t,o),l&&l.m(t,null),n=!0},p(e,n){e[2]?l?r(l,1):(l=q(e),l.c(),r(l,1),l.m(t,null)):l&&(x(),i(l,1,1,()=>{l=null}),b())},i(e){n||(r(l),n=!0)},o(e){i(l),n=!1},d(e){e&&_(t),l&&l.d()}}}function K(e){let t,n,s=e[0]._id?"Edit Vendor":"Create Vendor";return{c(){t=o("div"),n=y(s),v(t,"slot","title"),v(t,"class","font-semibold text-xl text-gray-600 pb-3")},m(e,o){h(e,t,o),l(t,n)},p(e,t){1&t[0]&&s!==(s=e[0]._id?"Edit Vendor":"Create Vendor")&&w(n,s)},d(e){e&&_(t)}}}function R(e){let t,n,s,c=e[28].name+"";return{c(){t=o("option"),n=y(c),t.__value=s=""+e[28].id,t.value=t.__value},m(e,o){h(e,t,o),l(t,n)},p(e,o){2&o[0]&&c!==(c=e[28].name+"")&&w(n,c),2&o[0]&&s!==(s=""+e[28].id)&&(t.__value=s),t.value=t.__value},d(e){e&&_(t)}}}function W(e){let t;return{c(){t=o("p"),t.textContent="No products selected.",v(t,"class","text-gray-500")},m(e,n){h(e,t,n)},p:T,d(e){e&&_(t)}}}function X(e){let t,n=e[0].products,o=[];for(let t=0;t<n.length;t+=1)o[t]=Y(H(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=U()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);h(e,t,n)},p(e,l){if(257&l[0]){let s;for(n=e[0].products,s=0;s<n.length;s+=1){const c=H(e,n,s);o[s]?o[s].p(c,l):(o[s]=Y(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){S(o,e),e&&_(t)}}}function Y(e){let t,n,s=e[8](e[25]).name+"";return{c(){t=o("span"),n=y(s),v(t,"class","inline-block p-2 rounded-lg text-xs bg-theme text-white m-1")},m(e,o){h(e,t,o),l(t,n)},p(e,t){1&t[0]&&s!==(s=e[8](e[25]).name+"")&&w(n,s)},d(e){e&&_(t)}}}function Z(e){let t,n,s,u,f,p,m,$,g,x,b,y,w,T,z,I,O,U,A,D,F,G,H,q,Q,J,K,Y,Z,ee,te,ne,oe,le,se,ce,ae,re;function ie(t){e[17].call(null,t)}let de={style:e[10],label:"Vendor Name",placeholder:"Enter vendor name"};void 0!==e[0].name&&(de.value=e[0].name);const ue=new M({props:de});function fe(t){e[18].call(null,t)}k.push(()=>C(ue,"value",ie));let pe={style:e[10],prefix:"+6",label:"Phone",placeholder:"012345678"};void 0!==e[0].phone&&(pe.value=e[0].phone);const me=new M({props:pe});function $e(t){e[19].call(null,t)}k.push(()=>C(me,"value",fe));let ge={style:e[10],label:"Unit/Building No",placeholder:""};void 0!==e[0].unit_no&&(ge.value=e[0].unit_no);const ve=new M({props:ge});function he(t){e[20].call(null,t)}k.push(()=>C(ve,"value",$e));let xe={style:e[10],label:"Address",placeholder:""};void 0!==e[0].address&&(xe.value=e[0].address);const be=new M({props:xe});function _e(t){e[21].call(null,t)}k.push(()=>C(be,"value",he));let ye={style:e[10],label:"Postcode",placeholder:""};void 0!==e[0].postcode&&(ye.value=e[0].postcode);const we=new M({props:ye});function ke(t){e[22].call(null,t)}k.push(()=>C(we,"value",_e));let Ce={style:e[10],label:"Bank Branch",placeholder:"E.g : Maybank"};void 0!==e[0].bank_type&&(Ce.value=e[0].bank_type);const je=new M({props:Ce});function Pe(t){e[23].call(null,t)}k.push(()=>C(je,"value",ke));let Ne={style:e[10],label:"Bank Account",placeholder:"Account No"};void 0!==e[0].bank_acc&&(Ne.value=e[0].bank_acc);const Ve=new M({props:Ne});k.push(()=>C(Ve,"value",Pe));let Be=e[1].outlets,Ee=[];for(let t=0;t<Be.length;t+=1)Ee[t]=R(L(e,Be,t));function Se(e,t){return e[0].products.length>0?X:W}let Te=Se(e),ze=Te(e);return{c(){t=o("div"),n=o("div"),c(ue.$$.fragment),u=j(),c(me.$$.fragment),p=j(),m=o("p"),m.textContent="Business Details",$=j(),g=o("div"),c(ve.$$.fragment),b=j(),c(be.$$.fragment),w=j(),T=o("div"),c(we.$$.fragment),I=j(),O=o("div"),c(je.$$.fragment),A=j(),c(Ve.$$.fragment),F=j(),G=o("p"),G.textContent="Vendor Products",H=j(),q=o("div"),Q=o("label"),Q.textContent="Drop Point Outlet",J=j(),K=o("select"),Y=o("option"),Y.textContent="Select Outlet";for(let e=0;e<Ee.length;e+=1)Ee[e].c();Z=j(),ee=o("label"),ee.textContent="Selected Products",te=j(),ne=o("div"),oe=o("div"),ze.c(),le=j(),se=o("i"),v(n,"class","flex mb-2"),v(m,"class","sect text-theme svelte-szog9f"),v(g,"class","flex mb-2"),v(T,"class","flex mb-2"),v(O,"class","flex mb-2"),v(G,"class","sect text-theme svelte-szog9f"),v(Q,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),Y.__value="",Y.value=Y.__value,v(K,"class","text-xl my-2 w-48"),void 0===e[0].outlet_id&&P(()=>e[24].call(K)),v(ee,"class","block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"),v(oe,"class","flex-grow"),v(se,"class","icon ion-md-expand text-gray-600 self-center"),v(ne,"class",ce="border rounded shadow-sm p-2 w-full flex cursor-pointer "+(e[3].length>0?"":"opacity-25")),v(q,"class","m-2"),v(t,"slot","content")},m(o,s,c){h(o,t,s),l(t,n),a(ue,n,null),l(n,u),a(me,n,null),l(t,p),l(t,m),l(t,$),l(t,g),a(ve,g,null),l(g,b),a(be,g,null),l(t,w),l(t,T),a(we,T,null),l(t,I),l(t,O),a(je,O,null),l(O,A),a(Ve,O,null),l(t,F),l(t,G),l(t,H),l(t,q),l(q,Q),l(q,J),l(q,K),l(K,Y);for(let e=0;e<Ee.length;e+=1)Ee[e].m(K,null);N(K,e[0].outlet_id),l(q,Z),l(q,ee),l(q,te),l(q,ne),l(ne,oe),ze.m(oe,null),l(ne,le),l(ne,se),ae=!0,c&&V(re),re=[B(K,"change",e[24]),B(K,"change",e[6]),B(ne,"click",e[9])]},p(e,t){const n={};!s&&1&t[0]&&(s=!0,n.value=e[0].name,E(()=>s=!1)),ue.$set(n);const o={};!f&&1&t[0]&&(f=!0,o.value=e[0].phone,E(()=>f=!1)),me.$set(o);const l={};!x&&1&t[0]&&(x=!0,l.value=e[0].unit_no,E(()=>x=!1)),ve.$set(l);const c={};!y&&1&t[0]&&(y=!0,c.value=e[0].address,E(()=>y=!1)),be.$set(c);const a={};!z&&1&t[0]&&(z=!0,a.value=e[0].postcode,E(()=>z=!1)),we.$set(a);const r={};!U&&1&t[0]&&(U=!0,r.value=e[0].bank_type,E(()=>U=!1)),je.$set(r);const i={};if(!D&&1&t[0]&&(D=!0,i.value=e[0].bank_acc,E(()=>D=!1)),Ve.$set(i),2&t[0]){let n;for(Be=e[1].outlets,n=0;n<Be.length;n+=1){const o=L(e,Be,n);Ee[n]?Ee[n].p(o,t):(Ee[n]=R(o),Ee[n].c(),Ee[n].m(K,null))}for(;n<Ee.length;n+=1)Ee[n].d(1);Ee.length=Be.length}1&t[0]&&N(K,e[0].outlet_id),Te===(Te=Se(e))&&ze?ze.p(e,t):(ze.d(1),ze=Te(e),ze&&(ze.c(),ze.m(oe,null))),(!ae||8&t[0]&&ce!==(ce="border rounded shadow-sm p-2 w-full flex cursor-pointer "+(e[3].length>0?"":"opacity-25")))&&v(ne,"class",ce)},i(e){ae||(r(ue.$$.fragment,e),r(me.$$.fragment,e),r(ve.$$.fragment,e),r(be.$$.fragment,e),r(we.$$.fragment,e),r(je.$$.fragment,e),r(Ve.$$.fragment,e),ae=!0)},o(e){i(ue.$$.fragment,e),i(me.$$.fragment,e),i(ve.$$.fragment,e),i(be.$$.fragment,e),i(we.$$.fragment,e),i(je.$$.fragment,e),i(Ve.$$.fragment,e),ae=!1},d(e){e&&_(t),d(ue),d(me),d(ve),d(be),d(we),d(je),d(Ve),S(Ee,e),ze.d(),V(re)}}}function ee(e){let t,n;const l=new D({props:{tools:e[5],style:e[4]}});return l.$on("selected",e[7]),{c(){t=o("div"),c(l.$$.fragment),v(t,"slot","toolbar")},m(e,o){h(e,t,o),a(l,t,null),n=!0},p:T,i(e){n||(r(l.$$.fragment,e),n=!0)},o(e){i(l.$$.fragment,e),n=!1},d(e){e&&_(t),d(l)}}}function te(e){let t,n,o;return{c(){t=j(),n=j(),o=j()},m(e,l){h(e,t,l),h(e,n,l),h(e,o,l)},p:T,i:T,o:T,d(e){e&&_(t),e&&_(n),e&&_(o)}}}function ne(e){let t;const n=new s({props:{style:{content:"overflow-y-scroll scrolling-touch"},$$slots:{default:[te],toolbar:[ee],content:[Z],title:[K],loader:[J]},$$scope:{ctx:e}}});return{c(){c(n.$$.fragment)},m(e,o){a(n,e,o),t=!0},p(e,t){const o={};15&t[0]|1&t[1]&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){t||(r(n.$$.fragment,e),t=!0)},o(e){i(n.$$.fragment,e),t=!1},d(e){d(n,e)}}}function oe(e,t,n){let o,l;u(e,f,e=>n(11,o=e)),u(e,p,e=>n(12,l=e));let s=!1,c=[],{vendor:a={}}=t,{account:r={}}=t;async function i(){let e;n(2,s=!0);try{e=await m(`https://db.getorders.app/products.sl.${r.franchise_id}.${a.outlet_id}.json`),"[object Array]"!=Object.prototype.toString.call(e)&&(e=void 0),console.log(e)}catch{console.log("S3 not found")}return e||(e=await m($("/guest/products"),{fran_id:r.franchise_id,outlet_id:a.outlet_id},"GET")),n(3,c=e),n(2,s=!1),c}""!=a.outlet_id&&i().then(e=>{n(0,a)}),f.subscribe(e=>{e.selected_prods&&(n(0,a.products=e.selected_prods,a),g(f,o={}))});return e.$set=e=>{"vendor"in e&&n(0,a=e.vendor),"account"in e&&n(1,r=e.account)},[a,r,s,c,{container:"justify-end"},[{name:"Close",icon:"close-circle",function:"pop_modal"},{name:"Save",icon:"checkmark-circle",function:"save"}],function(){n(0,a.products=[],a),i()},function(e){"pop_modal"==e.detail.function&&z(),"save"==e.detail.function&&(n(2,s=!0),m($("/vendor"),a).then(e=>{g(f,o={vendor:e}),z()}))},function(e){return c.find(t=>t.id==parseInt(e.id))||{name:"-"}},function(){g(p,l=[...l,{selected_prods:a.products,products:c,view:G}])},{container:"w-1/2 mx-2"},o,l,void 0,void 0,{body:"screen-height",content:"overflow-y-scroll scrolling-touch"},i,function(e){a.name=e,n(0,a)},function(e){a.phone=e,n(0,a)},function(e){a.unit_no=e,n(0,a)},function(e){a.address=e,n(0,a)},function(e){a.postcode=e,n(0,a)},function(e){a.bank_type=e,n(0,a)},function(e){a.bank_acc=e,n(0,a)},function(){a.outlet_id=I(this),n(0,a),n(1,r)}]}class le extends e{constructor(e){var s;super(),document.getElementById("svelte-szog9f-style")||((s=o("style")).id="svelte-szog9f-style",s.textContent=".sect.svelte-szog9f{font-size:1.25rem;font-weight:700;margin-top:0.75rem;margin-left:0.5rem;margin-right:0.5rem}",l(document.head,s)),t(this,e,oe,ne,n,{vendor:0,account:1},[-1,-1])}}function se(e,t,n){const o=e.slice();return o[11]=t[n],o}function ce(e){let t,n,l,s,c=e[0],a=[];for(let t=0;t<c.length;t+=1)a[t]=ie(se(e,c,t));const d=e=>i(a[e],1,1,()=>{a[e]=null});return{c(){t=o("div"),t.innerHTML='<div class="flex-grow">Vendor Name</div> \n    <div class="flex-none w-20">Products</div> \n    <div class="flex-none w-20">Outlet</div>',n=j();for(let e=0;e<a.length;e+=1)a[e].c();l=U(),v(t,"class","flex p-3 text-gray-400 font-semibold uppercase text-xs")},m(e,o){h(e,t,o),h(e,n,o);for(let t=0;t<a.length;t+=1)a[t].m(e,o);h(e,l,o),s=!0},p(e,t){if(161&t){let n;for(c=e[0],n=0;n<c.length;n+=1){const o=se(e,c,n);a[n]?(a[n].p(o,t),r(a[n],1)):(a[n]=ie(o),a[n].c(),r(a[n],1),a[n].m(l.parentNode,l))}for(x(),n=c.length;n<a.length;n+=1)d(n);b()}},i(e){if(!s){for(let e=0;e<c.length;e+=1)r(a[e]);s=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)i(a[e]);s=!1},d(e){e&&_(t),e&&_(n),S(a,e),e&&_(l)}}}function ae(e){let t;const n=new O({props:{type:"h-64",$$slots:{message:[de]},$$scope:{ctx:e}}});return{c(){c(n.$$.fragment)},m(e,o){a(n,e,o),t=!0},p(e,t){const o={};16384&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){t||(r(n.$$.fragment,e),t=!0)},o(e){i(n.$$.fragment,e),t=!1},d(e){d(n,e)}}}function re(e){let t,n,s,c,a,r,i,d,u,f,p,m,$=e[11].name+"",g=e[11].products.length+"",x=e[7](e[11].outlet_id).name+"";function b(...t){return e[10](e[11],...t)}return{c(){t=o("div"),n=o("div"),s=y($),c=j(),a=o("div"),r=y(g),i=y(" items"),d=j(),u=o("div"),f=y(x),p=j(),v(n,"class","flex-grow"),v(a,"class","flex-none w-20"),v(u,"class","flex-none w-20 text-left"),v(t,"class","flex w-full p-3")},m(e,o,$){h(e,t,o),l(t,n),l(n,s),l(t,c),l(t,a),l(a,r),l(a,i),l(t,d),l(t,u),l(u,f),h(e,p,o),$&&m(),m=B(t,"click",b)},p(t,n){e=t,1&n&&$!==($=e[11].name+"")&&w(s,$),1&n&&g!==(g=e[11].products.length+"")&&w(r,g),1&n&&x!==(x=e[7](e[11].outlet_id).name+"")&&w(f,x)},d(e){e&&_(t),e&&_(p),m()}}}function ie(e){let t;const n=new F({props:{$$slots:{default:[re]},$$scope:{ctx:e}}});return{c(){c(n.$$.fragment)},m(e,o){a(n,e,o),t=!0},p(e,t){const o={};16385&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){t||(r(n.$$.fragment,e),t=!0)},o(e){i(n.$$.fragment,e),t=!1},d(e){d(n,e)}}}function de(e){let t;return{c(){t=o("div"),t.textContent="One Moment Please..",v(t,"slot","message")},m(e,n){h(e,t,n)},d(e){e&&_(t)}}}function ue(e){let t,n,o,l,s;const u=new D({props:{style:e[3],tools:e[4]}});u.$on("selected",e[6]);const f=[ae,ce],p=[];function m(e,t){return e[0]&&e[1]&&!e[2]?1:0}return n=m(e),o=p[n]=f[n](e),{c(){c(u.$$.fragment),t=j(),o.c(),l=U()},m(e,o){a(u,e,o),h(e,t,o),p[n].m(e,o),h(e,l,o),s=!0},p(e,[t]){let s=n;n=m(e),n===s?p[n].p(e,t):(x(),i(p[s],1,1,()=>{p[s]=null}),b(),o=p[n],o||(o=p[n]=f[n](e),o.c()),r(o,1),o.m(l.parentNode,l))},i(e){s||(r(u.$$.fragment,e),r(o),s=!0)},o(e){i(u.$$.fragment,e),i(o),s=!1},d(e){d(u,e),e&&_(t),p[n].d(e),e&&_(l)}}}function fe(e,t,n){let o,l;u(e,p,e=>n(8,o=e)),u(e,f,e=>n(9,l=e));let s,c;function a(e){g(p,o=[...o,{vendor:e,account:c[0],view:le}])}A(()=>{m($("/vendor")).then(e=>{n(0,s=e)}),m($("/accounts")).then(e=>{n(1,c=e)})}),f.subscribe(e=>{if(e.vendor){let t=s.find(t=>t._id==e.vendor._id);n(0,s=t?s.map(t=>t._id==e.vendor._id?e.vendor:t):[...s,e.vendor]),g(f,l={})}});return[s,c,!1,{container:"border-b border-gray-300"},[{name:"Create",icon:"add",function:"add"}],a,function(e){if("add"==e.detail.function){let e={name:"",phone:"",address:"",unit_no:"",postcode:"",products:[],bank_type:"",bank_acc:"",notes:"",outlet_id:""};g(p,o=[...o,{vendor:{...e},account:c[0],view:le}])}},function(e){return c[0].outlets.find(t=>""+t.id==e)||{name:"-"}},o,l,e=>{a(e)}]}export default class extends e{constructor(e){super(),t(this,e,fe,ue,n,{})}}
//# sourceMappingURL=Vendors-8b855b10.js.map
